<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    
<script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>

    
<link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">

  
  

  <!-- PACE Progress Bar START -->

  
  <title>SingyuTang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="SingyuTang的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="SingyuTang">
<meta property="og:url" content="https://singyutang.github.io/index.html">
<meta property="og:site_name" content="SingyuTang">
<meta property="og:description" content="SingyuTang的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SingyuTang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="SingyuTang" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" >
  <link rel="stylesheet" href="/css/hiero.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

  <!-- Custom CSS -->
  
<link rel="stylesheet" href="/css/my.css">

  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-0123456789ABCDEF",
          enable_page_level_ads: true
      });
  </script>
  
<meta name="generator" content="Hexo 7.3.0"></head>

<script>
var themeMenus = {};

  themeMenus["/"] = "首页"; 

  themeMenus["/archives"] = "归档"; 

  themeMenus["/about"] = "关于"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" rel="home" >
                <img style="margin-bottom: 10px;"  width="124px" height="124px" alt="Hike News" src="https://avatars.githubusercontent.com/u/87192126?v=4">
              </a>
            
          </h1>

          
            <div class="site-description">SingyuTang的个人博客</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">首页</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">归档</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">关于</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-gravity-toolkit安装和使用笔记整理一"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/09/22/gravity-toolkit%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E4%B8%80/">gravity-toolkit安装和使用笔记整理一</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2025/09/22/gravity-toolkit%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E4%B8%80/" class="article-date">
	  <time datetime="2025-09-22T14:42:12.561Z" itemprop="datePublished">九月 22, 2025</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2><p>安装anaconda和jupyter notebook，并在conda中创建虚拟环境，命名为grace，创建虚拟环境见[[Anaconda安装与环境配置]]</p>
<h2 id="工具包"><a href="#工具包" class="headerlink" title="工具包"></a>工具包</h2><p><a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit">https://github.com/tsutterley/gravity-toolkit</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tsutterley/geoid-toolkit/">https://github.com/tsutterley/geoid-toolkit/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tsutterley/read-GRACE-geocenter">https://github.com/tsutterley/read-GRACE-geocenter</a></p>
<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>ubuntu16.04</p>
<h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><p>conda激活grace环境，安装依赖。</p>
<p>激活：conda activate grace</p>
<p>安装：conda install -c conda-forge package_name</p>
<h3 id="根目录-gravity-toolkit"><a href="#根目录-gravity-toolkit" class="headerlink" title="根目录(gravity-toolkit)"></a>根目录(gravity-toolkit)</h3><ol>
<li><p>参照github作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/tree/main#dependencies">gravity-toolkit&#x2F;README.rst#dependencies</a>安装依赖，包括</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.numpy.org/">numpy: Scientific Computing Tools For Python</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/">scipy: Scientific Tools for Python</a></li>
<li><a target="_blank" rel="noopener" href="https://dateutil.readthedocs.io/en/stable/">dateutil: powerful extensions to datetime</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yaml/pyyaml">PyYAML: YAML parser and emitter for Python</a></li>
<li><a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/lxml">lxml: processing XML and HTML in Python</a></li>
<li><a target="_blank" rel="noopener" href="https://python-future.org/">future: Compatibility layer between Python 2 and Python 3</a></li>
<li><a target="_blank" rel="noopener" href="https://matplotlib.org/">matplotlib: Python 2D plotting library</a></li>
<li><a target="_blank" rel="noopener" href="https://scitools.org.uk/cartopy/docs/latest/">cartopy: Python package designed for geospatial data processing</a></li>
<li><a target="_blank" rel="noopener" href="https://unidata.github.io/netcdf4-python/">netCDF4: Python interface to the netCDF C library</a></li>
<li><a target="_blank" rel="noopener" href="https://www.h5py.org/">h5py: Python interface for Hierarchal Data Format 5 (HDF5)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tsutterley/geoid-toolkit/">geoid-toolkit: Python utilities for calculating geoid heights from static gravity field coefficients</a></li>
</ul>
</li>
<li><p>参照github作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/requirements.txt">gravity-toolkit&#x2F;requirements.txt</a>安装第三方库，包括</p>
<ul>
<li>boto3</li>
<li>future</li>
<li>lxml</li>
<li>matplotlib</li>
<li>numpy</li>
<li>python-dateutil</li>
<li>pyyaml</li>
<li>scipy</li>
</ul>
</li>
</ol>
<h3 id="binder文件夹"><a href="#binder文件夹" class="headerlink" title=".binder文件夹"></a>.binder文件夹</h3><p>github中作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/.binder/environment.yml">gravity-toolkit&#x2F;.binder&#x2F;environment.yml</a>中的依赖，详细信息如下。</p>
<p>name: gravity_toolkit<br>channels:</p>
<ul>
<li>conda-forge</li>
</ul>
<p>dependencies:</p>
<ul>
<li>boto3</li>
<li>cartopy</li>
<li>future</li>
<li>h5py</li>
<li><a target="_blank" rel="noopener" href="https://pypi.org/project/ipywidgets/#history">ipywidgets&gt;&#x3D;7.6,&lt;8.0</a>(&#x3D;7.7.5)</li>
<li>ipympl</li>
<li>jupyter</li>
<li>jupyterlab&#x3D;3</li>
<li>jupyterlab_widgets</li>
<li>lxml</li>
<li>markupsafe&#x3D;&#x3D;2.0.1</li>
<li>matplotlib</li>
<li>netCDF4</li>
<li>notebook</li>
<li>numpy</li>
<li>python&gt;&#x3D;3.6</li>
<li>python-dateutil</li>
<li>pyyaml</li>
<li>scipy</li>
<li>tk</li>
<li>pip</li>
<li>pip:<ul>
<li>git+<a target="_blank" rel="noopener" href="https://github.com/tsutterley/geoid-toolkit.git">https://github.com/tsutterley/geoid-toolkit.git</a></li>
</ul>
</li>
</ul>
<h3 id="github-workflows"><a href="#github-workflows" class="headerlink" title=".github&#x2F;workflows"></a>.github&#x2F;workflows</h3><ol>
<li><p>github中作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/.github/workflows/python-request.yml">gravity-toolkit&#x2F;.github&#x2F;workflows&#x2F;python-request.yml</a>中的安装依赖，详细信息如下。</p>
<p>此工作流将安装 Python 依赖项、运行测试并使用各种 Python 版本进行 lint。</p>
<p>name: Python on pull request</p>
<p>on:<br>  pull_request:</p>
<p>jobs:<br>  build:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python">runs-on: $&#123;&#123; matrix.os &#125;&#125;<br>strategy:<br>  matrix:<br>    os: [ubuntu-latest, macos-latest, windows-latest]<br>    python-version: [<span class="hljs-number">3.8</span>]<br>env:<br>  OS: $&#123;&#123; matrix.os &#125;&#125;<br>  PYTHON: $&#123;&#123; matrix.python-version &#125;&#125;<br>defaults:<br>  run:<br>    shell: bash -l &#123;<span class="hljs-number">0</span>&#125;<br><br>steps:<br>- uses: actions/checkout@v2<br>- name: <span class="hljs-type">Set</span> up conda $&#123;&#123; matrix.python-version &#125;&#125;<br>  uses: conda-incubator/setup-miniconda@v2<br>  <span class="hljs-keyword">with</span>:<br>    auto-update-conda: true<br>    python-version: $&#123;&#123; matrix.python-version &#125;&#125;<br>    activate-environment: gravity_toolkit<br>    environment-file: .binder/environment.yml<br>- name: Create conda Test Environment<br>  run: |<br>    conda install flake8 pytest pytest-cov cython<br>    pip install git+https://github.com/tsutterley/read-GRACE-geocenter.git<br>- name: Lint <span class="hljs-keyword">with</span> flake8<br>  run: |<br>    <span class="hljs-comment"># stop the build if there are Python syntax errors or undefined names</span><br>    flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics<br>    <span class="hljs-comment"># exit-zero treats all errors as warnings. The GitHub editor is 127 chars wide</span><br>    flake8 . --count --exit-zero --<span class="hljs-built_in">max</span>-complexity=<span class="hljs-number">10</span> --<span class="hljs-built_in">max</span>-line-length=<span class="hljs-number">127</span> --statistics<br>- name: Test <span class="hljs-keyword">with</span> pytest<br>  run: |<br>    pip install --no-deps .<br>    pytest --verbose --capture=no --cov=./ --cov-report=xml \<br>        --username=$&#123;&#123; secrets.EARTHDATA_USERNAME &#125;&#125; \<br>        --password=$&#123;&#123; secrets.EARTHDATA_PASSWORD &#125;&#125; \<br>        --webdav=$&#123;&#123; secrets.PODAAC_PASSWORD &#125;&#125;<br>- name: Archive code coverage results<br>  uses: actions/upload-artifact@v2<br>  <span class="hljs-keyword">with</span>:<br>    name: code-coverage-report<br>    path: ./coverage.xml<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="doc文件夹"><a href="#doc文件夹" class="headerlink" title=".doc文件夹"></a>.doc文件夹</h3><ol>
<li><p>github中作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/doc/environment.yml">gravity-toolkit&#x2F;doc&#x2F;environment.yml</a>安装doc 环境，包括下列库。安装命令：<code>conda install -c conda-forge package_name</code></p>
<p>name: gravity-docs<br>channels:</p>
<ul>
<li>conda-forge<br>dependencies:</li>
<li>docutils&lt;0.18</li>
<li>fontconfig</li>
<li>fonttools</li>
<li>freetype</li>
<li>future</li>
<li>graphviz</li>
<li>lxml</li>
<li>markupsafe&#x3D;&#x3D;2.0.1</li>
<li>numpy</li>
<li>numpydoc</li>
<li>pip</li>
<li>python&gt;&#x3D;3.6</li>
<li>python-dateutil</li>
<li>pyyaml</li>
<li>scipy</li>
<li>sphinx</li>
<li>sphinx_rtd_theme</li>
<li>pip:<ul>
<li>sphinx-argparse&gt;&#x3D;0.4</li>
<li>..</li>
</ul>
</li>
</ul>
</li>
<li><p>github中作者中的<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/doc/source/getting_started/Citations.rst">gravity-toolkit&#x2F;doc&#x2F;source&#x2F;getting_started&#x2F;Citations.rst</a>中的依赖，包括下列库。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://scitools.org.uk/cartopy/docs/latest/">cartopy: Python package designed for geospatial data processing</a></li>
<li><a target="_blank" rel="noopener" href="https://python-future.org/">future: Compatibility layer between Python 2 and Python 3</a></li>
<li><a target="_blank" rel="noopener" href="https://www.h5py.org/">h5py: Python interface for Hierarchal Data Format 5 (HDF5)</a></li>
<li><a target="_blank" rel="noopener" href="https://ipywidgets.readthedocs.io/en/latest/">ipywidgets: interactive HTML widgets for Jupyter notebooks and IPython</a></li>
<li><a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/lxml">lxml: processing XML and HTML in Python</a></li>
<li><a target="_blank" rel="noopener" href="https://matplotlib.org/">matplotlib: Python 2D plotting library</a></li>
<li><a target="_blank" rel="noopener" href="https://unidata.github.io/netcdf4-python/">netCDF4: Python interface to the netCDF C library</a></li>
<li><a target="_blank" rel="noopener" href="https://numpy.org/">numpy: Scientific Computing Tools For Python</a></li>
<li><a target="_blank" rel="noopener" href="https://dateutil.readthedocs.io/en/stable/">python-dateutil: powerful extensions to datetime</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yaml/pyyaml">PyYAML: YAML parser and emitter for Python</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/">scipy: Scientific Tools for Python</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/tkinter.html">tkinter: Python interface to the Tcl&#x2F;Tk GUI toolkit</a></li>
</ul>
</li>
</ol>
<h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><h3 id="pip-安装-或选择下面的setup安装"><a href="#pip-安装-或选择下面的setup安装" class="headerlink" title="pip 安装(或选择下面的setup安装)"></a>pip 安装(或选择下面的setup安装)</h3><p>python3 -m pip install –user git+<a target="_blank" rel="noopener" href="https://github.com/tsutterley/read-GRACE-geocenter.git">https://github.com/tsutterley/read-GRACE-geocenter.git</a></p>
<p>python3 -m pip install –user git+<a target="_blank" rel="noopener" href="https://github.com/tsutterley/geoid-toolkit.git">https://github.com/tsutterley/geoid-toolkit.git</a></p>
<p>python3 -m pip install –user git+<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit">https://github.com/tsutterley/gravity-toolkit</a></p>
<h3 id="setup安装"><a href="#setup安装" class="headerlink" title="setup安装"></a>setup安装</h3><p>进入gravity-toolkit文件夹（setup.py）同级目录，运行<em>python setup.py install</em></p>
<p>同理，将read-GRACE-geocenter和geoid-toolkit拷贝入gravity-toolkit文件夹，运行<em>python setup.py install</em></p>
<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><p>将github上下载的文件夹中的script文件夹拷贝到~&#x2F;anaconda3&#x2F;envs&#x2F;grace&#x2F;lib&#x2F;python3.8&#x2F;site-packages&#x2F;gravity_toolkit-1.2.0-py3.8.egg&#x2F;gravity_toolkit 文件夹下便于直接访问script下的函数。</p>
<h3 id="环境变量设置"><a href="#环境变量设置" class="headerlink" title="环境变量设置"></a>环境变量设置</h3><p>将gravity_toolkit、gravity_toolkit&#x2F;scripts和geoid_toolkit添加到环境变量(<del>&#x2F;.bashrc)</del>中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;&lt;&lt; <span class="hljs-string">GRACE conda initialize &lt;&lt;&lt;</span></span><br>alias grace=&quot;source activate grace&quot;<br>export PATH=&quot;~/anaconda3/envs/grace/lib/python3.8/site-packages/gravity_toolkit-1.2.0-py3.8.egg/gravity_toolkit:$PATH&quot;<br>export PATH=&quot;~/anaconda3/envs/grace/lib/python3.8/site-packages/gravity_toolkit-1.2.0-py3.8.egg/gravity_toolkit/scripts:$PATH&quot;<br>export PATH=&quot;~/anaconda3/envs/grace/lib/python3.8/site-packages/geoid_toolkit-1.1.1-py3.8.egg/geoid_toolkit:$PATH&quot;<br></code></pre></td></tr></table></figure>

<p>添加完成后，终端执行<code>source ~/.bashrc</code></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>终端执行<code>cnes_grace_sync.py --help</code>和<code>podaac_cumulus.py --help</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">podaac_cumulus.py --directory=&quot;/home/manasakura/draft&quot; --release RL06<br></code></pre></td></tr></table></figure>

<h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>setup安装后，在conda虚拟环境中就已存在該工具包，路径为<code>~/anaconda3/envs/grace/lib/python3.8/site-packages</code>，在调用工具包中的函数时实际上是调用site-packages中的函数，而不是从github上下载的文件夹中的函数，所以如果按照github文件夹的路径进行函数访问将不会访问到。</p>
<h1 id="学习笔记"><a href="#学习笔记" class="headerlink" title="学习笔记"></a>学习笔记</h1><h2 id="文档学习"><a href="#文档学习" class="headerlink" title="文档学习"></a>文档学习</h2><h3 id="doc文件夹-1"><a href="#doc文件夹-1" class="headerlink" title="doc文件夹"></a>doc文件夹</h3><p>doc学习顺序可按照该<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/blob/main/doc/source/index.rst">文档</a>进行</p>
<p>函数用法可查看<a target="_blank" rel="noopener" href="https://gravity-toolkit.readthedocs.io/en/latest/">readdocs.io</a>和<a target="_blank" rel="noopener" href="https://github.com/tsutterley/gravity-toolkit/tree/main/doc/source/api_reference">api_reference</a></p>
<h3 id="gravity-toolkit文件夹"><a href="#gravity-toolkit文件夹" class="headerlink" title="gravity_toolkit文件夹"></a>gravity_toolkit文件夹</h3><h4 id="SLR文件夹"><a href="#SLR文件夹" class="headerlink" title="SLR文件夹"></a>SLR文件夹</h4><p>将C20.py, CS2.py, C30.py, C40.py, C50.py计算出的球协系数值（去除AOD）与matlab中计算出的进行对比，二者答案一致（只校对了GRACE_months 1～4月，对应2002年1月～2002年4月），matlab的计算值保存为<code>~/coding/gravity_workspace/myworkspace/cs2m_c30_c40_c50_gracemonth_1_4_check.mat</code></p>
<h5 id="C20-py"><a href="#C20-py" class="headerlink" title="C20.py"></a>C20.py</h5><h6 id="C20-RL06-txt-PROC-CSR"><a href="#C20-RL06-txt-PROC-CSR" class="headerlink" title="C20_RL06.txt(PROC&#x3D;CSR)"></a>C20_RL06.txt(PROC&#x3D;CSR)</h6><p>SLR.C20中的data变量不是直接读取的C20_RL06.txt中的Column 2中的C20，而是将第二列的C20数据减去Column 5中的AOD产品，详细信息查看原文件中的comment如下。</p>
<p>The RL-06 background gravity model includes solid earth and ocean tides, solid earth and ocean pole tides, and the Atmosphere-Ocean De-aliasing (AOD1B) product. However, the monthly mean of the AOD model has been restored; subtract Column 5 to remove it.</p>
<p>源代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">dinput[<span class="hljs-string">&#x27;time&#x27;</span>] = file_input[<span class="hljs-string">&#x27;time&#x27;</span>]<br>dinput[<span class="hljs-string">&#x27;month&#x27;</span>] = gravity_toolkit.time.calendar_to_grace(dinput[<span class="hljs-string">&#x27;time&#x27;</span>])<br><span class="hljs-comment"># monthly spherical harmonic replacement solutions</span><br>dinput[<span class="hljs-string">&#x27;data&#x27;</span>] = file_input[<span class="hljs-string">&#x27;C20&#x27;</span>].copy()<br><span class="hljs-comment"># monthly spherical harmonic formal standard deviations</span><br>dinput[<span class="hljs-string">&#x27;error&#x27;</span>] = file_input[<span class="hljs-string">&#x27;sigma&#x27;</span>]*<span class="hljs-number">1e-10</span><br><span class="hljs-comment"># Background gravity model includes solid earth and ocean tides, solid</span><br><span class="hljs-comment"># earth and ocean pole tides, and the Atmosphere-Ocean De-aliasing</span><br><span class="hljs-comment"># product. The monthly mean of the AOD model has been restored.</span><br><span class="hljs-keyword">if</span> AOD:<br>    <span class="hljs-comment"># Removing AOD product that was restored in the solution</span><br>    dinput[<span class="hljs-string">&#x27;data&#x27;</span>] -= file_input[<span class="hljs-string">&#x27;AOD&#x27;</span>]*<span class="hljs-number">1e-10</span><br></code></pre></td></tr></table></figure>

<h5 id="CS2-py"><a href="#CS2-py" class="headerlink" title="CS2.py"></a>CS2.py</h5><h6 id="C21-22-S21-22-RL06-txt-PROC-CSR"><a href="#C21-22-S21-22-RL06-txt-PROC-CSR" class="headerlink" title="C21(22)_S21(22)_RL06.txt(PROC&#x3D;CSR)&#96;"></a>C21(22)_S21(22)_RL06.txt(PROC&#x3D;CSR)&#96;</h6><p>读取的CS21&#x2F;CS22是文件中SLR CS21&#x2F;CS22（Column 2,3）减去AOD(大气-海洋去混叠,Column 6,7）之后的CS21&#x2F;CS22,AOD简述可查看<a target="_blank" rel="noopener" href="https://ui.adsabs.harvard.edu/abs/2019AGUFM.G51B0583C/abstract#:~:text=The%20Atmosphere-Ocean%20De-aliasing%20%28AOD%29%20product%20is%20a%20set,attraction%20due%20to%20the%20changing%20atmosphere-ocean%20mass%20distribution.">Atmosphere-Ocean De-aliasing For GRACE-FO - NASA&#x2F;ADS</a> 和  <a target="_blank" rel="noopener" href="http://dx.doi.org/10.1029/2011GL048881">Evaluation of high-frequency oceanographic signal in GRACE data: Implications for de-aliasing</a></p>
<p>大气-海洋去锯齿 (AOD) 产品是一组 Stokes 系数，表示由于大气-海洋质量分布变化引起的非潮汐引力的时间效应。它被用作处理数据流的力模型，以防止高频大气和海洋运动的影响混叠到月解中。</p>
<p>源代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">dinput[<span class="hljs-string">&#x27;time&#x27;</span>] = content[<span class="hljs-string">&#x27;time&#x27;</span>].copy()<br>dinput[<span class="hljs-string">&#x27;month&#x27;</span>] = gravity_toolkit.time.calendar_to_grace(dinput[<span class="hljs-string">&#x27;time&#x27;</span>])<br><span class="hljs-comment"># remove the monthly mean of the AOD model</span><br>dinput[<span class="hljs-string">&#x27;C2m&#x27;</span>] = content[<span class="hljs-string">&#x27;C2&#x27;</span>] - content[<span class="hljs-string">&#x27;C2aod&#x27;</span>]*<span class="hljs-number">10</span>**-<span class="hljs-number">10</span><br>dinput[<span class="hljs-string">&#x27;S2m&#x27;</span>] = content[<span class="hljs-string">&#x27;S2&#x27;</span>] - content[<span class="hljs-string">&#x27;S2aod&#x27;</span>]*<span class="hljs-number">10</span>**-<span class="hljs-number">10</span><br><span class="hljs-comment"># scale SLR solution sigmas</span><br>dinput[<span class="hljs-string">&#x27;eC2m&#x27;</span>] = content[<span class="hljs-string">&#x27;eC2&#x27;</span>]*<span class="hljs-number">10</span>**-<span class="hljs-number">10</span><br>dinput[<span class="hljs-string">&#x27;eS2m&#x27;</span>] = content[<span class="hljs-string">&#x27;eS2&#x27;</span>]*<span class="hljs-number">10</span>**-<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>

<h5 id="C30-py"><a href="#C30-py" class="headerlink" title="C30.py"></a>C30.py</h5><h6 id="CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR"><a href="#CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR" class="headerlink" title="CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)"></a>CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)</h6><p>利用read_SLR_harmonics.py计算C30完整球协系数，并返回C30完整球协系数，GRACE_month为从2002.0起算的月份（见time.py中的calendar_to_grace函数）。从GGMO5C平均重力场模型（头文件中）和SLR观测值（正文，系数以相对于平均重力场的变化形式给出，已经去除AOD）相加求C30完整球协系数，并将求得的C30完整球协系数作为返回值。</p>
<p>核心代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#### CSR_Monthly_5x5_Gravity_Harmonics.txt</span><br><span class="hljs-comment"># GGM05C重力场表头（头文件）</span><br>    L    M         C                  S               sigma C      sigma S<br><span class="hljs-comment"># SLR观测值（正文内容，球协系数异常值）表头及单位</span><br>n, m, Cnm, Snm, Cnm+AOD, Snm+AOD, C-sigma, S-sigma, MJD_mid_point, Year_mid_point<br>Units <span class="hljs-number">1.0e-10</span><br><span class="hljs-comment">#### read_GRACE_harmonics.py</span><br><span class="hljs-comment"># fill mean field Ylms（头文件中GGMO5C平均重力场模型）</span><br>mean_Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][l1,m1] = np.float64(line[<span class="hljs-number">2</span>].replace(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>))<br>mean_Ylms[<span class="hljs-string">&#x27;slm&#x27;</span>][l1,m1] = np.float64(line[<span class="hljs-number">3</span>].replace(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>))<br>mean_Ylm_error[<span class="hljs-string">&#x27;clm&#x27;</span>][l1,m1] = np.float64(line[<span class="hljs-number">4</span>].replace(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>))<br>mean_Ylm_error[<span class="hljs-string">&#x27;slm&#x27;</span>][l1,m1] = np.float64(line[<span class="hljs-number">5</span>].replace(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>))<br><br><span class="hljs-comment"># fill anomaly field Ylms and rescale to output（SLR观测的cs_lm异常值和cs_lm_error）</span><br>Ylm_anomalies[<span class="hljs-string">&#x27;clm&#x27;</span>][l1,m1,d] = np.float64(line[<span class="hljs-number">2</span>])*SCALE<br>Ylm_anomalies[<span class="hljs-string">&#x27;slm&#x27;</span>][l1,m1,d] = np.float64(line[<span class="hljs-number">3</span>])*SCALE<br>Ylm_anomaly_error[<span class="hljs-string">&#x27;clm&#x27;</span>][l1,m1,d] = np.float64(line[<span class="hljs-number">6</span>])*SCALE<br>Ylm_anomaly_error[<span class="hljs-string">&#x27;slm&#x27;</span>][l1,m1,d] = np.float64(line[<span class="hljs-number">7</span>])*SCALE<br><br><span class="hljs-comment"># calculate full coefficients and full errors（C30完整球协系数）</span><br>Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][:,:,d] = Ylm_anomalies[<span class="hljs-string">&#x27;clm&#x27;</span>][:,:,d] + mean_Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][:,:]<br>Ylms[<span class="hljs-string">&#x27;slm&#x27;</span>][:,:,d] = Ylm_anomalies[<span class="hljs-string">&#x27;slm&#x27;</span>][:,:,d] + mean_Ylms[<span class="hljs-string">&#x27;slm&#x27;</span>][:,:]<br>Ylms[<span class="hljs-string">&#x27;error&#x27;</span>][<span class="hljs-string">&#x27;clm&#x27;</span>][:,:,d]=np.sqrt(Ylm_anomaly_error[<span class="hljs-string">&#x27;clm&#x27;</span>][:,:,d]**<span class="hljs-number">2</span> +<br>    mean_Ylm_error[<span class="hljs-string">&#x27;clm&#x27;</span>][:,:]**<span class="hljs-number">2</span>)<br>Ylms[<span class="hljs-string">&#x27;error&#x27;</span>][<span class="hljs-string">&#x27;slm&#x27;</span>][:,:,d]=np.sqrt(Ylm_anomaly_error[<span class="hljs-string">&#x27;slm&#x27;</span>][:,:,d]**<span class="hljs-number">2</span> +<br>    mean_Ylm_error[<span class="hljs-string">&#x27;slm&#x27;</span>][:,:]**<span class="hljs-number">2</span>)<br><br><span class="hljs-comment">#### C30.py</span><br><span class="hljs-comment"># CSR 5x5 + 6,1 file from CSR and extract C3,0 coefficients</span><br>Ylms = gravity_toolkit.read_SLR_harmonics(SLR_file, HEADER=<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># extract dates, C30 harmonics and errors</span><br>dinput[<span class="hljs-string">&#x27;time&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;time&#x27;</span>].copy()<br>dinput[<span class="hljs-string">&#x27;data&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,:].copy()<br>dinput[<span class="hljs-string">&#x27;error&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;error&#x27;</span>][<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,:].copy()<br></code></pre></td></tr></table></figure>

<h5 id="C40-py"><a href="#C40-py" class="headerlink" title="C40.py"></a>C40.py</h5><h6 id="CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR-1"><a href="#CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR-1" class="headerlink" title="CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)"></a>CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)</h6><p>同C30.py的方法计算C40完整球协系数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#### CSR_Monthly_5x5_Gravity_Harmonics.txt 同上C30.py</span><br><br><span class="hljs-comment">#### read_GRACE_harmonics.py 同上C30.py</span><br><br><span class="hljs-comment">#### C30.py</span><br><span class="hljs-comment"># read 5x5 + 6,1 file from CSR and extract C4,0 coefficients</span><br>Ylms = gravity_toolkit.read_SLR_harmonics(SLR_file, HEADER=<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># extract dates, C40 harmonics and errors</span><br>dinput[<span class="hljs-string">&#x27;time&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;time&#x27;</span>].copy()<br>dinput[<span class="hljs-string">&#x27;data&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,:].copy()<br>dinput[<span class="hljs-string">&#x27;error&#x27;</span>] = Ylms[<span class="hljs-string">&#x27;error&#x27;</span>][<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,:].copy()<br></code></pre></td></tr></table></figure>

<h5 id="C50-py"><a href="#C50-py" class="headerlink" title="C50.py"></a>C50.py</h5><h6 id="CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR-2"><a href="#CSR-Monthly-5x5-Gravity-Harmonics-txt-PROC-CSR-2" class="headerlink" title="CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)"></a>CSR_Monthly_5x5_Gravity_Harmonics.txt(PROC&#x3D;CSR)</h6><p>同C30.py的方法计算C50完整球协系数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#### CSR_Monthly_5x5_Gravity_Harmonics.txt 同上C30.py</span><br><br><span class="hljs-comment">#### read_GRACE_harmonics.py 同上C30.py#### C50.py</span><br><br><span class="hljs-comment"># read 5x5 + 6,1 file from GSFC and extract coefficients</span><br>Ylms = gravity_toolkit.read_SLR_harmonics(SLR_file, HEADER=<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># calculate 28-day moving-average solution from 7-day arcs</span><br>dinput.update(gravity_toolkit.convert_weekly(Ylms[<span class="hljs-string">&#x27;time&#x27;</span>],Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">5</span>,<span class="hljs-number">0</span>,:], DATE=DATE, NEIGHBORS=<span class="hljs-number">28</span>))<br><span class="hljs-comment"># no estimated spherical harmonic errors</span><br>dinput[<span class="hljs-string">&#x27;error&#x27;</span>] = np.zeros_like(DATE,dtype=<span class="hljs-string">&#x27;f8&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="gen-averaging-kernel-py"><a href="#gen-averaging-kernel-py" class="headerlink" title="gen_averaging_kernel.py"></a>gen_averaging_kernel.py</h4><p>生成平均核系数，从而最大限度地减少总误差。</p>
<p>其中输入参数为</p>
<p>INPUTS:<br>    gclm: cosine spherical harmonics of exact averaging kernel    </p>
<p>    gslm: sine spherical harmonics of exact averaging kernel    </p>
<p>    eclm: measurement error in the cosine harmonics    </p>
<p>    eslm: measurement error in the sine harmonics    </p>
<p>    sigma: variance of the surface mass signal    </p>
<p>    hw: Gaussian radius of the kernel in kilometers</p>
<p>需要用到的计算公式如下：</p>
<p>区域核函数（exact averaging kernel）</p>
<p>$$<br>\vartheta(\theta, \phi)&#x3D;0 \quad outside \quad the \quad basin\<br>\vartheta(\theta, \phi)&#x3D;1 \quad inside \quad the \quad basin<br>$$</p>
<p>求gclm&#x2F;gslm</p>
<p>$$<br>\begin{Bmatrix}<br>\Delta{\vartheta}<em>{lm}^c \ \Delta\hat{\vartheta}</em>{lm}^s<br>\end{Bmatrix}&#x3D;<br>\int \vartheta(\theta,\phi) \widetilde{P}_{lm}(cos\theta)<br>\begin{Bmatrix}<br>cosm\phi \ sinm\phi<br>\end{Bmatrix}d\Omega<br>$$</p>
<p>离散形式为</p>
<p>$$<br>\begin{Bmatrix}<br>\Delta{\vartheta}<em>{lm}^c \ \Delta\hat{\vartheta}</em>{lm}^s<br>\end{Bmatrix}&#x3D;<br>\sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360} \vartheta(\theta_i,\lambda_j)\widetilde P_{lm}(cos\theta_i)sin(m \lambda_j)</p>
<p>\begin{Bmatrix}<br>cosm\phi \ sinm\phi<br>\end{Bmatrix}<br>sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>附上$\vartheta(\theta, \phi)$的球谐展开形式</p>
<p>$$<br>\vartheta(\theta,\phi) &#x3D; \frac{1}{4\pi}</p>
<p>\sum_{l&#x3D;0}^{\infty}\sum_{m&#x3D;0}^l \widetilde{P}<em>{lm}(cos\theta)(\vartheta</em>{lm}^c \Delta C+\vartheta_{lm}^s \Delta S)<br>$$</p>
<p>计算Wlms：</p>
<h4 id="gen-disc-load-py"><a href="#gen-disc-load-py" class="headerlink" title="gen_disc_load.py"></a>gen_disc_load.py</h4><p>计算均匀 disc load（负荷，与mass含义相近）的重力（gravitational）球谐系数。</p>
<h4 id="gen-harmonics-py"><a href="#gen-harmonics-py" class="headerlink" title="gen_harmonics.py"></a>gen_harmonics.py</h4><p>gen_harmonics.py函数进行球谐系数展开主要是利用下列公式：</p>
<p>$$<br>\Delta C_{lm}&#x3D;\frac{1}{4\pi} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)cos(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>$$<br>\Delta S_{lm}&#x3D;\frac{1}{4\pi} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)sin(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>其中，</p>
<p>$$<br>\Delta \theta &#x3D; \Delta \lambda &#x3D; \pi&#x2F;180<br>$$</p>
<p>上面公式与<a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00190-015-0824-2">Chen（2015）</a>中公式有所不同，<a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00190-015-0824-2">Chen（2015）</a>公式如下：</p>
<p>$$<br>\Delta C_{lm}&#x3D;\frac{3}{4\pi \rho_E a} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)cos(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>$$<br>\Delta S_{lm}&#x3D;\frac{3}{4\pi \rho_E a} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)sin(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>将空间域的数据转化为球协系数.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">demo2</span>():<br>    grid_dir = <span class="hljs-string">&#x27;~/coding/gravity_workspace/gwrks0628/CSR_RL06_GSM_ICE6G-D_High_Res_wCSR_C20_wCSR_21_wCSR_22_wCSR_C30_wCSR_C40_wCSR_C50_wTellus_DEG1_cmwe_L60M60_r300km_FL_004-248.nc&#x27;</span><br>    grid = spatial().from_netCDF4(grid_dir)<br>    grid_data = grid.data[:, :, <span class="hljs-number">0</span>]<br>    lon = grid.lon<br>    lat = grid.lat<br>    Ylms = gen_harmonics(grid_data, lon, lat, METHOD=<span class="hljs-string">&#x27;integration&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Finished!&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>在上述代码中，grid_dir路径指向的文件是由<code>[GRACE-Spatial-Maps.ipynb]</code>文件生成的grid对象，包含计算出的等效水高格网。gen_stokes函数可将該格网（二维）展开为球谐系数，其计算结果与matlab包中的<code>grid2cs.m</code>计算结果相同。matlab代码如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs matlab">grid_dir = <span class="hljs-string">&#x27;~/coding/gravity_workspace/gwrks0628/CSR_RL06_GSM_ICE6G-D_High_Res_wCSR_C20_wCSR_21_wCSR_22_wCSR_C30_wCSR_C40_wCSR_C50_wTellus_DEG1_cmwe_L60M60_r300km_FL_004-248.nc&#x27;</span>;;<br>info = ncinfo(grid_dir);<br>variables = info.Variables;<br>grid_data = ncread(grid_dir, <span class="hljs-string">&#x27;z&#x27;</span>);    <span class="hljs-comment">% n_lon * n_lat * n_month</span><br>lon = ncread(grid_dir, <span class="hljs-string">&#x27;lon&#x27;</span>);        <span class="hljs-comment">% 西经（-180-0）：东经（0-180）</span><br>lat = ncread(grid_dir, <span class="hljs-string">&#x27;lat&#x27;</span>);        <span class="hljs-comment">% 北纬（90-0）：南纬（0：-90）</span><br>time = ncread(grid_dir, <span class="hljs-string">&#x27;time&#x27;</span>);<br><span class="hljs-comment">% matlab包要求grid_data格网数据呈东经：西经（0：180：-180/0）、北纬：南纬（90：-90）分布。</span><br>clear grid_data_temp;<br>grid_data_temp(:,:) = grid_data(<span class="hljs-number">1</span>,:,:);<br>grid_data_temp2 = grid_data_temp&#x27;;<br>grid_data_temp3 = [grid_data_temp2(:,<span class="hljs-number">721</span>:<span class="hljs-number">1440</span>) grid_data_temp2(:,<span class="hljs-number">1</span>:<span class="hljs-number">720</span>)];        <span class="hljs-comment">% n_lat * n_lon, 呈东经：西经（0：180：-180/0）、北纬：南纬（90：-90）分布</span><br>cs2 = gmt_grid2cs(grid_data_temp3/<span class="hljs-number">100</span>, <span class="hljs-number">60</span>);<br></code></pre></td></tr></table></figure>

<p>需要注意的是，在利用matlab包进行计算时，grid单位换算成了m（grid_data_temp3&#x2F;100），上面两个计算结果相同，结果如下。</p>



<p>备注：该函数不涉及units类的引入和factor的计算。</p>
<h4 id="gen-stokes-py"><a href="#gen-stokes-py" class="headerlink" title="gen_stokes.py"></a>gen_stokes.py</h4><p>将空间域的数据转化为球协系数，可在ocean_stokes.py中查看其如何使用。</p>
<p>公式引用自<a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00190-015-0824-2">Chen（2015）</a> ，计算公式如下，</p>
<p>$$<br>\Delta C_{lm}&#x3D;\frac{3}{4\pi \rho_E a} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)cos(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>$$<br>\Delta S_{lm}&#x3D;\frac{3}{4\pi \rho_E a} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)sin(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>因为</p>
<p>$$<br>M_e &#x3D; \rho_e V &#x3D; \frac{4 \pi a^3 \rho_e}{3}<br>$$</p>
<p>上面公式等价于下式，</p>
<p>$$<br>\Delta C_{lm}&#x3D;\frac{a^2}{M_e} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)cos(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>$$<br>\Delta S_{lm}&#x3D;\frac{a^2}{M_e} \frac{k_l + 1}{2l+1} \sum_{i&#x3D;1}^{180} \sum_{j&#x3D;1}^{360}\Delta \sigma(\theta_i,\lambda_j)P_{lm}(cos\theta_i)sin(m \lambda_j)sin \theta_i \Delta \theta_i \Delta \lambda_j<br>$$</p>
<p>核心实现代码如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python">    <span class="hljs-comment">#### gen_stokes.py</span><br><br>    <span class="hljs-comment"># longitude degree spacing in radians</span><br>    dphi = dlon*np.pi/<span class="hljs-number">180.0</span><br>    <span class="hljs-comment"># colatitude degree spacing in radians</span><br>    dth = dlat*np.pi/<span class="hljs-number">180.0</span><br>    factors = gravity_toolkit.units(lmax=LMAX)<br><br>    <span class="hljs-comment"># reforming data to lonXlat if input latXlon</span><br>    sz = np.shape(data)<br>    data = data.T <span class="hljs-keyword">if</span> (sz[<span class="hljs-number">0</span>] == nlat) <span class="hljs-keyword">else</span> np.copy(data)<br><br>    <span class="hljs-keyword">elif</span> (UNITS == <span class="hljs-number">1</span>):<br>    <span class="hljs-comment"># Default Parameter: Input in cm w.e. (g/cm^2)</span><br>    dfactor = factors.spatial(*LOVE).cmwe<br>    int_fact[:] = np.sin(th)*dphi*dth<br><br>    <span class="hljs-comment"># Calculating cos/sin of phi arrays</span><br><span class="hljs-comment"># output [m,phi]</span><br>m = np.arange(MMAX+<span class="hljs-number">1</span>)<br>ccos = np.cos(np.dot(m[:,np.newaxis],phi))<br>ssin = np.sin(np.dot(m[:,np.newaxis],phi))<br><br><span class="hljs-comment"># Calculating fully-normalized Legendre Polynomials</span><br><span class="hljs-comment"># Output is plm[l,m,th]</span><br>plm = np.zeros((LMAX+<span class="hljs-number">1</span>, MMAX+<span class="hljs-number">1</span>, nlat))<br><span class="hljs-comment"># added option to precompute plms to improve computational speed</span><br><span class="hljs-keyword">if</span> PLM <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>    <span class="hljs-comment"># if plms are not pre-computed: calculate Legendre polynomials</span><br>    PLM, dPLM = plm_holmes(LMAX, np.cos(th))<br><br><span class="hljs-comment"># Multiplying by integration factors [sin(theta)*dtheta*dphi]</span><br><span class="hljs-comment"># truncate legendre polynomials to spherical harmonic order MMAX</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,nlat):<br>    plm[:,m,j] = PLM[:,m,j]*int_fact[j]<br><br><span class="hljs-comment"># Initializing preliminary spherical harmonic matrices</span><br>yclm = np.zeros((LMAX+<span class="hljs-number">1</span>, MMAX+<span class="hljs-number">1</span>))<br>yslm = np.zeros((LMAX+<span class="hljs-number">1</span>, MMAX+<span class="hljs-number">1</span>))<br><span class="hljs-comment"># Initializing output spherical harmonic matrices</span><br>Ylms = gravity_toolkit.harmonics(lmax=LMAX, mmax=MMAX)<br>Ylms.clm = np.zeros((LMAX+<span class="hljs-number">1</span>, MMAX+<span class="hljs-number">1</span>))<br>Ylms.slm = np.zeros((LMAX+<span class="hljs-number">1</span>, MMAX+<span class="hljs-number">1</span>))<br><span class="hljs-comment"># Multiplying gridded data with sin/cos of m#phis</span><br><span class="hljs-comment"># This will sum through all phis in the dot product</span><br><span class="hljs-comment"># output [m,theta]</span><br>dcos = np.dot(ccos,data)<br>dsin = np.dot(ssin,data)<br><span class="hljs-keyword">for</span> l <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(LMIN,LMAX+<span class="hljs-number">1</span>):<span class="hljs-comment"># equivalent to LMIN:LMAX</span><br>    mm = np.<span class="hljs-built_in">min</span>([MMAX,l])<span class="hljs-comment"># truncate to MMAX if specified (if l &gt; MMAX)</span><br>    m = np.arange(<span class="hljs-number">0</span>,mm+<span class="hljs-number">1</span>)<span class="hljs-comment"># mm+1 elements between 0 and mm</span><br>    <span class="hljs-comment"># Summing product of plms and data over all latitudes</span><br>    <span class="hljs-comment"># axis=1 signifies the direction of the summation</span><br>    yclm[l,m] = np.<span class="hljs-built_in">sum</span>(plm[l,m,:]*dcos[m,:], axis=<span class="hljs-number">1</span>)<br>    yslm[l,m] = np.<span class="hljs-built_in">sum</span>(plm[l,m,:]*dsin[m,:], axis=<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># Multiplying by factors to convert to fully normalized coefficients</span><br>    Ylms.clm[l,m] = dfactor[l]*yclm[l,m]<br>    Ylms.slm[l,m] = dfactor[l]*yslm[l,m]<br><br><span class="hljs-comment"># return the output spherical harmonics object</span><br><span class="hljs-keyword">return</span> Ylms<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#### units.py</span><br>        <span class="hljs-comment"># set default keyword arguments</span><br>        kwargs.setdefault(<span class="hljs-string">&#x27;include_elastic&#x27;</span>, <span class="hljs-literal">True</span>)<br>        fraction = np.ones((<span class="hljs-variable language_">self</span>.lmax+<span class="hljs-number">1</span>))<br>        <span class="hljs-comment"># compensate for elastic deformation within the solid earth</span><br>        <span class="hljs-keyword">if</span> kwargs[<span class="hljs-string">&#x27;include_elastic&#x27;</span>]:<br>            fraction += kl[<span class="hljs-variable language_">self</span>.l]<br>        <span class="hljs-comment"># degree dependent coefficients</span><br>        <span class="hljs-comment"># norm, fully normalized spherical harmonics</span><br>        <span class="hljs-variable language_">self</span>.norm = np.ones((<span class="hljs-variable language_">self</span>.lmax+<span class="hljs-number">1</span>))<br>        <span class="hljs-comment"># cmwe, centimeters water equivalent [g/cm^2]</span><br>        <span class="hljs-variable language_">self</span>.cmwe = <span class="hljs-variable language_">self</span>.rho_e*<span class="hljs-variable language_">self</span>.rad_e*(<span class="hljs-number">2.0</span>*<span class="hljs-variable language_">self</span>.l+<span class="hljs-number">1.0</span>)/fraction/<span class="hljs-number">3.0</span><br>        <span class="hljs-comment"># mmwe, millimeters water equivalent [kg/m^2]</span><br>        <span class="hljs-variable language_">self</span>.mmwe = <span class="hljs-number">10.0</span>*<span class="hljs-variable language_">self</span>.rho_e*<span class="hljs-variable language_">self</span>.rad_e*(<span class="hljs-number">2.0</span>*<span class="hljs-variable language_">self</span>.l+<span class="hljs-number">1.0</span>)/fraction/<span class="hljs-number">3.0</span><br></code></pre></td></tr></table></figure>

<p>使用 gen_harmonics.py中使用过的同种grid格网数据，进行球谐系数展开，代码如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_lovenumbers</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    read love numbers</span><br><span class="hljs-string">    Returns</span><br><span class="hljs-string">    -------</span><br><span class="hljs-string">    hl, kl, ll: tuple</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    love_numbers_file = utilities.get_data_path([<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-string">&#x27;love_numbers&#x27;</span>])<br>    header = <span class="hljs-number">2</span><br>    columns = [<span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;hl&#x27;</span>, <span class="hljs-string">&#x27;kl&#x27;</span>, <span class="hljs-string">&#x27;ll&#x27;</span>]<br>    hl, kl, ll = read_love_numbers(love_numbers_file, LMAX=<span class="hljs-number">60</span>,<br>                                   HEADER=header, COLUMNS=columns, REFERENCE=<span class="hljs-string">&#x27;CF&#x27;</span>, FORMAT=<span class="hljs-string">&#x27;tuple&#x27;</span>)<br>    <span class="hljs-keyword">return</span> hl, kl, ll<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">demo</span>():<br>    grid_dir = <span class="hljs-string">&#x27;~/coding/gravity_workspace/gwrks0628/CSR_RL06_GSM_ICE6G-D_High_Res_wCSR_C20_wCSR_21_wCSR_22_wCSR_C30_wCSR_C40_wCSR_C50_wTellus_DEG1_cmwe_L60M60_r300km_FL_004-248.nc&#x27;</span><br>    love_number = load_lovenumbers()<br>    grid = spatial().from_netCDF4(grid_dir)<br><br>    grid_data = grid.data[:,:,<span class="hljs-number">0</span>]<br>    lon = grid.lon<br>    lat = grid.lat<br>    Ylms = gen_stokes(grid_data, lon, lat, LOVE=love_number)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Finished!&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>运行结果如下</p>


<h4 id="grace-date-py"><a href="#grace-date-py" class="headerlink" title="grace_date.py"></a>grace_date.py</h4><p>相关介绍查看test_gravity_notebook.ipynb。</p>
<h4 id="grace-find-months-py"><a href="#grace-find-months-py" class="headerlink" title="grace_find_months.py"></a>grace_find_months.py</h4><p>相关介绍查看test_gravity_notebook.ipynb。</p>
<h4 id="grace-months-index-py"><a href="#grace-months-index-py" class="headerlink" title="grace_months_index.py"></a>grace_months_index.py</h4><p>相关介绍查看test_gravity_notebook.ipynb。</p>
<h4 id="grace-input-months-py"><a href="#grace-input-months-py" class="headerlink" title="grace_input_months.py"></a>grace_input_months.py</h4><p>读取GRACE&#x2F;GRACE- fo文件中指定的球谐l（阶数）和m（次数）以及指定的日期范围。</p>
<p>改正包括：</p>
<p>    一阶项替换(如果指定)。</p>
<p>    用单反值替换C20(如果指定)。</p>
<p>    用179+月份的单反值替换C21&#x2F;S21&#x2F;C22&#x2F;S22&#x2F;C30&#x2F;C50(如果指定)。</p>
<p>    更正使用GAE, GAF和GAG文件的ECMWF大气“跳跃”。</p>
<p>    Wahr et al.(2015)对极潮漂移的修正。</p>
<p>疑问：該函数中CS21&#x2F;CS22&#x2F;C30&#x2F;C40&#x2F;C50项为什么要设置当grace_month大于179（源码中为 grace_month &gt; 176）时才能用SLR观测值替换GRACE观测值，请问是否在哪篇文献中有所提及，是否可以解答或者提供一下文献链接呢？代码如下（此处仅展示C21项的替换代码，S21&#x2F;CS22&#x2F;C30&#x2F;C40&#x2F;C50代码基本相同）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i,grace_month <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(months):<br>    count = np.count_nonzero(C21_input[<span class="hljs-string">&#x27;month&#x27;</span>] == grace_month)<br>    <span class="hljs-keyword">if</span> (count != <span class="hljs-number">0</span>) <span class="hljs-keyword">and</span> (grace_month &gt; <span class="hljs-number">176</span>):<br>        k, = np.nonzero(C21_input[<span class="hljs-string">&#x27;month&#x27;</span>] == grace_month)<br>        grace_Ylms[<span class="hljs-string">&#x27;clm&#x27;</span>][<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,i] = np.copy(C21_input[<span class="hljs-string">&#x27;C2m&#x27;</span>][k])<br>        grace_Ylms[<span class="hljs-string">&#x27;slm&#x27;</span>][<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,i] = np.copy(C21_input[<span class="hljs-string">&#x27;S2m&#x27;</span>][k])<br>        grace_Ylms[<span class="hljs-string">&#x27;eclm&#x27;</span>][<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,i] = np.copy(C21_input[<span class="hljs-string">&#x27;eC2m&#x27;</span>][k])<br>        grace_Ylms[<span class="hljs-string">&#x27;eslm&#x27;</span>][<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,i] = np.copy(C21_input[<span class="hljs-string">&#x27;eS2m&#x27;</span>][k])<br></code></pre></td></tr></table></figure>

<h4 id="geocenter-py"><a href="#geocenter-py" class="headerlink" title="geocenter.py"></a>geocenter.py</h4><h5 id="from-tellus"><a href="#from-tellus" class="headerlink" title="from_tellus()"></a>from_tellus()</h5><p>读取一阶项文件TN-13_GEOC_CSR_RL06.txt，不做处理，详细用法见test_gravity_notebook.ipynb.</p>
<h4 id="harmonics-py"><a href="#harmonics-py" class="headerlink" title="harmonics.py"></a>harmonics.py</h4><h5 id="drift-self-t-epoch-2003-3"><a href="#drift-self-t-epoch-2003-3" class="headerlink" title="drift(self, t, epoch&#x3D;2003.3)"></a>drift(self, t, epoch&#x3D;2003.3)</h5><p>将球协系数速度场按照时间积分计算漂移。</p>
<p>核心代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># # gravity_test_substep.py</span><br>GRACE_Ylms = harmonics().from_dict(Ylms)<br>GIA_Ylms_rate = gia(lmax=LMAX).from_GIA(filename=GIA_file,<br>    GIA=GIA, mmax=MMAX)<br>GIA_Ylms = GIA_Ylms_rate.drift(GRACE_Ylms.time, epoch=<span class="hljs-number">2003.3</span>)<br><br><span class="hljs-comment"># # drift(self, t, epoch=2003.3)</span><br><span class="hljs-comment"># calculate drift</span><br><span class="hljs-keyword">for</span> i,ti <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(t):<br>    temp.clm[:,:,i] = <span class="hljs-variable language_">self</span>.clm*(ti - epoch)<br>    temp.slm[:,:,i] = <span class="hljs-variable language_">self</span>.slm*(ti - epoch)<br><span class="hljs-comment"># assign degree and order fields</span><br>temp.update_dimensions()<br><span class="hljs-keyword">return</span> temp<br></code></pre></td></tr></table></figure>

<h5 id="from-dict-self-d-kwargs"><a href="#from-dict-self-d-kwargs" class="headerlink" title="from_dict(self, d, **kwargs)"></a>from_dict(self, d, **kwargs)</h5><p>将字典转化为harmonics类型。</p>
<p>用法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Ylms = grace_input_months(base_dir, PROC=PROC, DREL=DREL, DSET=DREL, LMAX=<span class="hljs-number">60</span>, start_mon=<span class="hljs-number">4</span>, end_mon=<span class="hljs-number">24</span>,<br>                                 missing=[<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">18</span>], SLR_C20=SLR_C20, DEG1=DEG1, SLR_21=SLR_21, SLR_22=SLR_22,<br>                                 SLR_C30=SLR_C30, SLR_C40=SLR_C40, SLR_C50=SLR_C50)<br>GRACE_Ylms = harmonics().from_dict(Ylms)<br></code></pre></td></tr></table></figure>

<h5 id="mean-self-apply-False-indices-Ellipsis"><a href="#mean-self-apply-False-indices-Ellipsis" class="headerlink" title="mean(self, apply&#x3D;False, indices&#x3D;Ellipsis)"></a>mean(self, apply&#x3D;False, indices&#x3D;Ellipsis)</h5><p>执行后就会更新GRACE_Ylms内的变量，返回值为球协系数均值。</p>
<p>用法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">GRACE_Ylms.mean(apply=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<h4 id="ocean-stokes-py"><a href="#ocean-stokes-py" class="headerlink" title="ocean_stokes.py"></a>ocean_stokes.py</h4><p>读取land-sea mask文件并转化为球协系数。</p>
<h5 id="ocean-stokes-LANDMASK-LMAX-MMAX-None-LOVE-None-VARNAME-’LSMASK’-SIMPLIFY-False"><a href="#ocean-stokes-LANDMASK-LMAX-MMAX-None-LOVE-None-VARNAME-’LSMASK’-SIMPLIFY-False" class="headerlink" title="ocean_stokes(LANDMASK, LMAX, MMAX&#x3D;None, LOVE&#x3D;None, VARNAME&#x3D;’LSMASK’,       SIMPLIFY&#x3D;False)"></a>ocean_stokes(LANDMASK, LMAX, MMAX&#x3D;None, LOVE&#x3D;None, VARNAME&#x3D;’LSMASK’,       SIMPLIFY&#x3D;False)</h5><h6 id="读取landsea-nc文件"><a href="#读取landsea-nc文件" class="headerlink" title="读取landsea.nc文件"></a>读取landsea.nc文件</h6><p>下载源：<a target="_blank" rel="noopener" href="https://www.ncl.ucar.edu/Applications/Data/cdf/landsea.nc">https://www.ncl.ucar.edu/Applications/Data/cdf/landsea.nc</a> 。</p>
<p>1x1 degree mask distributed from UCAR as part of NCL。<br>landsea.nc文件中的变量名包括lon,lat和LSMASK三类，可使用ncview landsea.nc进行查看。<br>landsea.nc中各值的含义：<br>    0： ocean<br>    1：land<br>    2：lake<br>    3：small island<br>    4：ice shelf</p>
<p>ocean_stokes代码使用如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> gravity_toolkit <span class="hljs-keyword">import</span> ocean_stokes<br>landsea_mask_file = <span class="hljs-string">&quot;/home/manasakura/coding/gravity_workspace/Data/LANDSEA_MASK/landsea.nc&quot;</span><br><span class="hljs-keyword">from</span> gravity_toolkit.utilities <span class="hljs-keyword">import</span> get_data_path<br><span class="hljs-keyword">from</span> gravity_toolkit.read_love_numbers <span class="hljs-keyword">import</span> read_love_numbers<br>love_numbers_file = get_data_path([<span class="hljs-string">&#x27;data&#x27;</span>,<span class="hljs-string">&#x27;love_numbers&#x27;</span>])<br>hl,kl,ll = read_love_numbers(love_numbers_file, HEADER=<span class="hljs-number">2</span>, FORMAT=<span class="hljs-string">&#x27;tuple&#x27;</span>, REFERENCE=<span class="hljs-string">&#x27;CF&#x27;</span>)<br>ocean_Ylms = ocean_stokes(LANDMASK=landsea_mask_file, LMAX=<span class="hljs-number">60</span>, MMAX=<span class="hljs-number">60</span>, LOVE=(hl,kl,ll), VARNAME=<span class="hljs-string">&#x27;LSMASK&#x27;</span>,<br>    SIMPLIFY=<span class="hljs-literal">False</span>)<br><span class="hljs-built_in">print</span>(ocean_Ylms)<br></code></pre></td></tr></table></figure>

<p>ocean_stokes函数会调用spatial.py中的spatial.from_netCDF4()函数，主要用于读取landsea.nc文件，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># # ocean_stokes.py</span><br>landsea = spatial().from_netCDF4(LANDMASK,<br>        date=<span class="hljs-literal">False</span>, varname=VARNAME)<br></code></pre></td></tr></table></figure>

<p>ocean_stokes函数还会调用gen_stokes.py中的gen_stokes()函数，用于将空间域的数据转化为球协系数，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># # ocean_stokes.py</span><br><span class="hljs-comment"># create land function</span><br>nth,nphi = landsea.shape<br>land_function = np.zeros((nth,nphi), dtype=np.float64)<br><span class="hljs-comment"># combine land and island levels for land function</span><br>indx,indy = np.nonzero((landsea.data &gt;= <span class="hljs-number">1</span>) &amp; (landsea.data &lt;= <span class="hljs-number">3</span>))<br>land_function[indx,indy] = <span class="hljs-number">1.0</span><br><span class="hljs-comment"># remove isolated points if specified</span><br><span class="hljs-keyword">if</span> SIMPLIFY:<br>    land_function -= find_isolated_points(land_function)<br><span class="hljs-comment"># ocean function reciprocal of land function</span><br>ocean_function = <span class="hljs-number">1.0</span> - land_function<br><span class="hljs-comment"># convert to spherical harmonics (1 cm w.e.)</span><br>Ylms = gen_stokes(ocean_function.T, landsea.lon, landsea.lat,<br>    UNITS=<span class="hljs-number">1</span>, LMIN=<span class="hljs-number">0</span>, LMAX=LMAX, MMAX=MMAX, LOVE=LOVE)<br></code></pre></td></tr></table></figure>

<p>上一段代码可简单表达为制作海洋掩膜（海洋部分的值为1），并转化为球协系数。</p>
<h4 id="read-GRACE-harmonics-py"><a href="#read-GRACE-harmonics-py" class="headerlink" title="read_GRACE_harmonics.py"></a>read_GRACE_harmonics.py</h4><p>读取GRACE&#x2F;GRACE-FO Level-2 数据。用法见test_gravity_notebook.ipynb。</p>
<h4 id="read-love-numbers-py"><a href="#read-love-numbers-py" class="headerlink" title="read_love_numbers.py"></a>read_love_numbers.py</h4><h5 id="load-love-numbers"><a href="#load-love-numbers" class="headerlink" title="load love_numbers"></a>load love_numbers</h5><p>Load Love Numbers match expected for reference frame。用法见test_gravity_notebook.ipynb。</p>
<h5 id="load-Load-Love2-CE-dat"><a href="#load-Load-Love2-CE-dat" class="headerlink" title="load Load_Love2_CE.dat"></a>load Load_Love2_CE.dat</h5><p>Gegout (2005) Load Love Numbers。用法见test_gravity_notebook.ipynb。</p>
<h5 id="load-PREM-LLNs-truncated-dat"><a href="#load-PREM-LLNs-truncated-dat" class="headerlink" title="load PREM-LLNs-truncated.dat"></a>load PREM-LLNs-truncated.dat</h5><p>Wang et al. (2012) Load Love Numbers。用法见test_gravity_notebook.ipynb。</p>
<h4 id="read-GIA-model-py"><a href="#read-GIA-model-py" class="headerlink" title="read_GIA_model.py"></a>read_GIA_model.py</h4><p>读取GIA文件（球协系数）。</p>
<h5 id="read-GIA-model-input-file-GIA-None-MMAX-None-DATAFORM-None-kwargs"><a href="#read-GIA-model-input-file-GIA-None-MMAX-None-DATAFORM-None-kwargs" class="headerlink" title="read_GIA_model(input_file, GIA&#x3D;None, MMAX&#x3D;None, DATAFORM&#x3D;None, **kwargs)"></a>read_GIA_model(input_file, GIA&#x3D;None, MMAX&#x3D;None, DATAFORM&#x3D;None, **kwargs)</h5><p>从文件中（ICE-6G_High_Res_Stokes_trend.txt）直接读取GIA球协系数值（GRACE Approximation）。用法见test_gravity_notebook.ipynb。</p>
<h5 id="gia-from-GIA-self-filename-kwargs"><a href="#gia-from-GIA-self-filename-kwargs" class="headerlink" title="gia.from_GIA(self, filename, **kwargs)"></a>gia.from_GIA(self, filename, **kwargs)</h5><p>从文件中（ICE-6G_High_Res_Stokes_trend.txt）直接读取GIA球协系数值（GRACE Approximation）。用法见test_gravity_notebook.ipynb。</p>
<h4 id="spatial-py"><a href="#spatial-py" class="headerlink" title="spatial.py"></a>spatial.py</h4><p>对空间数据进行读、写等操作。</p>
<h5 id="spatial-from-netCDF4-self-filename-kwargs"><a href="#spatial-from-netCDF4-self-filename-kwargs" class="headerlink" title="spatial.from_netCDF4(self, filename, **kwargs)"></a>spatial.from_netCDF4(self, filename, **kwargs)</h5><p>读取nc文件。</p>
<h6 id="landsea-nc"><a href="#landsea-nc" class="headerlink" title="landsea.nc"></a>landsea.nc</h6><p>下载：<a target="_blank" rel="noopener" href="https://www.ncl.ucar.edu/Applications/Data/cdf/landsea.nc">https://www.ncl.ucar.edu/Applications/Data/cdf/landsea.nc</a></p>
<p>landsea.nc文件中包含lon, lat, LSMASK三个变量，该文件可利用ncview可视化查看，查看命令<code>ncview landsea.nc</code>。</p>
<p>核心代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># # ocean_stokes.py</span><br><span class="hljs-comment"># VARNAME = &quot;LSMASK&quot;</span><br><span class="hljs-comment"># LANDMASK = &quot;/home/manasakura/coding/gravity_workspace/Data/LANDSEA_MASK/landsea.nc&quot;</span><br>landsea = spatial().from_netCDF4(LANDMASK,<br>        date=<span class="hljs-literal">False</span>, varname=VARNAME)<br></code></pre></td></tr></table></figure>

<p>from_netCDF4()函数返回值为landsea（spatial类型），包含attributes, data, extent, filename, lon, lat, spacing等成员变量。data变量中包含的即是landsea.nc文件中的”LSMASK”变量值，下面需要对data变量多加以说明。</p>
<p>data：180×360的ndarray类型的矩阵，上半矩阵为南半球，下半矩阵为北半球，左半矩阵为东半球，右半矩阵为西半球。即是以0度经线和南纬90度纬线的交叉点为坐标原点建立坐标系，横坐标为i，纵坐标为j，i越往东值越大，j越往北值越大，用numpy读取該矩阵也是同理，按照此坐标系可确定矩阵每个坐标（i，j）所对应的地理坐标。</p>
<h3 id="scripts文件夹"><a href="#scripts文件夹" class="headerlink" title="scripts文件夹"></a>scripts文件夹</h3><h4 id="time-py"><a href="#time-py" class="headerlink" title="time.py"></a>time.py</h4><h5 id="calendar-to-grace-year-month-1-around-np-floor"><a href="#calendar-to-grace-year-month-1-around-np-floor" class="headerlink" title="calendar_to_grace(year,month&#x3D;1,around&#x3D;np.floor)"></a>calendar_to_grace(year,month&#x3D;1,around&#x3D;np.floor)</h5><p>**comments:**convert calendar dates to GRACE&#x2F;GRACE-FO months</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">grace_month</span> = around(<span class="hljs-number">12</span>.<span class="hljs-number">0</span>*(year - <span class="hljs-number">2002</span>.<span class="hljs-number">0</span>)) + month<br></code></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRACE/" rel="tag">GRACE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/toolkit/" rel="tag">toolkit</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-hello-world"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/09/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2025/09/22/hello-world/" class="article-date">
	  <time datetime="2025-09-22T14:10:26.404Z" itemprop="datePublished">九月 22, 2025</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-GRACE中的MASCON数据下载简介"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/01/07/GRACE%E4%B8%AD%E7%9A%84MASCON%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E7%AE%80%E4%BB%8B/">GRACE中的Mascons数据最新下载简介</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2025/01/07/GRACE%E4%B8%AD%E7%9A%84MASCON%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E7%AE%80%E4%BB%8B/" class="article-date">
	  <time datetime="2025-01-07T04:12:45.000Z" itemprop="datePublished">一月 7, 2025</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-GRACE中的Mascons数据下载简介"><a href="#1-GRACE中的Mascons数据下载简介" class="headerlink" title="1. GRACE中的Mascons数据下载简介"></a>1. GRACE中的Mascons数据下载简介</h1><p>GRACE 孪生卫星于 2002 年 3 月 17 日发射，对地球重力场变化进行详细测量，并彻底改变了对地球陆地、冰盖和海洋水库以及地震和地壳变形的研究。两颗 GRACE 卫星已完成超过 13 年的连续测量！</p>
<p>GRACE 是美国和德国航天机构（NASA 和 DLR）的合作项目。目前，GRACE 地面段的运营由 GFZ 德国地球科学研究中心和欧洲航天局 (ESA) 共同资助。NASA、ESA、GFZ 和 DLR 正在支持继续测量地球系统的质量再分布。该任务的设计、建造和发射的主要合作伙伴包括喷气推进实验室（JPL）、德克萨斯大学空间研究中心（CSR）、德国地球科学研究中心（GFZ）以及 Astrium GmBH、Space Systems Loral (SS&#x2F;L)、Onera 和 Eurockot GmBH。</p>
<p>质量浓度块（Mascons）本质上是另一种形式的重力场基函数，用于拟合 GRACE 卫星的星间测距观测数据。与标准的球谐函数方法相比，mascons 提供了多个关键优势。球谐方法是 GRACE&#x2F;GRACE-FO 观测前十年中的标准方法，而 Mascons 的应用使得地球物理约束的实现变得更加容易。这些先验约束有助于在 Level-2 数据处理阶段过滤掉 GRACE&#x2F;GRACE-FO 观测数据中的噪声，这种方法比球谐方法生成的陆地和海洋网格所需的经验性后处理滤波更加严谨。</p>
<p>目前发布Mascons数据产品的包括三大机构，分别是CSR、JPL和GSFC（注意不是GFZ）。</p>
<h1 id="2-JPL发布的Mascons数据下载"><a href="#2-JPL发布的Mascons数据下载" class="headerlink" title="2.JPL发布的Mascons数据下载"></a>2.JPL发布的Mascons数据下载</h1><p>简介：JPL RL06M 质量块解决方案针对放置在椭圆地球表面的 4,551 个等面积 3 度球冠质量块求解每月重力场变化。自然，这些质量块的子集位于海岸线上，因此它们包含混合的陆地和海洋信号。该产品应用了海岸线分辨率改进 (CRI) 过滤器以在后处理步骤中分离每个陆地&#x2F;海洋质量块内的陆地和海洋质量部分。由于海岸线定义明确，因此此过滤器的效果将在数据中轻松看到。更多处理细节可在<a target="_blank" rel="noopener" href="https://grace.jpl.nasa.gov/data/get-data/jpl_global_mascons/">官网</a>查看。</p>
<p>JPL Mascons数据下载官网：<a target="_blank" rel="noopener" href="https://grace.jpl.nasa.gov/data/get-data/jpl_global_mascons/">https://grace.jpl.nasa.gov/data/get-data/jpl_global_mascons/</a></p>
<h2 id="数据下载"><a href="#数据下载" class="headerlink" title="数据下载"></a>数据下载</h2><ol>
<li>登陆官网，如图，当前JPL-Mascons数据最新版本为JPL RL06.3_v04。</li>
</ol>



<ol start="2">
<li>点击右上角”Current Data Versions”中的”JPL PO.DAAC.”，跳转的页面为最新JPL-Mascons数据下载页面，如图。</li>
</ol>




<ol start="3">
<li>进入”JPL PO.DAAC.”页面后，点击”Data Access”，跳转至数据下载页面，如图。</li>
</ol>


<ol start="4">
<li>点击上图中红框标记的链接，即”Search Granules”，跳转至数据搜索页面，如图。</li>
</ol>


<ol start="5">
<li>搜索页面如上图，点击“下载”按钮，进行下载，数据格式为NC格式，下载成功。</li>
</ol>


<ol start="6">
<li>查看数据可使用Matlab或Python读取查看，也可使用NASA提供的可视化工具进行查看，如<a target="_blank" rel="noopener" href="https://www.giss.nasa.gov/tools/panoply/download/">Panoply</a>，如使用Ubuntu系统，Panoply可参考<a href="https://singyutang.github.io/2023/09/26/ubuntu16.04%E5%AE%89%E8%A3%85jdk%E5%92%8Cpanoply/">博客</a>安装。</li>
</ol>
<h1 id="3-CSR发布的Mascons数据下载"><a href="#3-CSR发布的Mascons数据下载" class="headerlink" title="3.CSR发布的Mascons数据下载"></a>3.CSR发布的Mascons数据下载</h1><p>简介：CSR-Mascons数据产品当前最新产品为RL06.3(RL0603)，RL06.3 质量块已被重新处理的 RL06.3 质量块取代。与 RL06.2 质量块相比，RL06.3产品使用改进后的 GRACE-FO 加速度计数据处理重力场（ACH 与 ACX2 数据集），以应对采用宽松的姿态控制死区的日期，从而缓解冷气体推进系统的泄漏。重新处理的月份包括 2023 年 1 月和 2 月，以及 2023 年 7 月及之后的所有月份。更多处理细节可在<a target="_blank" rel="noopener" href="https://www2.csr.utexas.edu/grace/RL06_mascons.html">CSR Mascons官网</a>查看。</p>
<p>CSR Mascons数据下载官网：<a target="_blank" rel="noopener" href="https://www2.csr.utexas.edu/grace/RL06_mascons.html">https://www2.csr.utexas.edu/grace/RL06_mascons.html</a></p>
<p>注意：本文撰写时发布的CSR Mascons数据时间跨度：2002 年 4 月至 2024 年 10 月，数据更新日期：2025-01-06.</p>
<h2 id="数据下载-1"><a href="#数据下载-1" class="headerlink" title="数据下载"></a>数据下载</h2><ol>
<li>登陆官网，如图，当前CSR Mascons数据最新版本为 CSR RL06.3(RL0603)。</li>
</ol>


<ol start="2">
<li>点击下图红框中的内容进行下载，数据格式为NC，数据查看见上文。</li>
</ol>



<h1 id="4-GSFC发布的Mascons数据下载"><a href="#4-GSFC发布的Mascons数据下载" class="headerlink" title="4. GSFC发布的Mascons数据下载"></a>4. GSFC发布的Mascons数据下载</h1><p>简介：GSFC机构发布的Mascons产品包含每月 Mascons 产品和高分辨率趋势质量矩产品，更多细节和<a target="_blank" rel="noopener" href="https://earth.gsfc.nasa.gov/sites/default/files/2022-05/gsfc_mascons_hdf5_format_rl06v2.pdf">参考文档</a>可在<a target="_blank" rel="noopener" href="https://earth.gsfc.nasa.gov/geo/data/grace-mascons">GSFC官网</a>查看。</p>
<p>数据下载官网：<a target="_blank" rel="noopener" href="https://earth.gsfc.nasa.gov/geo/data/grace-mascons">https://earth.gsfc.nasa.gov/geo/data/grace-mascons</a></p>
<h2 id="数据下载-2"><a href="#数据下载-2" class="headerlink" title="数据下载"></a>数据下载</h2><ol>
<li>登陆官网，如图，当前GSFC Mascons数据最新版本为RL06v2.0。</li>
</ol>


<ol start="2">
<li>根据研究需要下载对应的数据，数据格式为HDF5、ASCII或NC，数据查看见上文。</li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRACE/" rel="tag">GRACE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRACE-FO/" rel="tag">GRACE-FO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mascons/" rel="tag">Mascons</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/websites/" rel="tag">websites</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-GitHub如何上传大于25MB的文件"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/01/05/GitHub%E5%A6%82%E4%BD%95%E4%B8%8A%E4%BC%A0%E5%A4%A7%E4%BA%8E25MB%E7%9A%84%E6%96%87%E4%BB%B6/">GitHub如何上传大于25MB的文件</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2025/01/05/GitHub%E5%A6%82%E4%BD%95%E4%B8%8A%E4%BC%A0%E5%A4%A7%E4%BA%8E25MB%E7%9A%84%E6%96%87%E4%BB%B6/" class="article-date">
	  <time datetime="2025-01-05T08:29:01.000Z" itemprop="datePublished">一月 5, 2025</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>利用Git上传代码，当大于25MB的文件时，会提示上传失败，此时需要使用Git LFS(Git Large File)来上传大文件。Git安装可参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_46351233/article/details/124733661">Git的安装步骤</a>。</p>
<h1 id="1-下载安装Git-LFS"><a href="#1-下载安装Git-LFS" class="headerlink" title="1 下载安装Git LFS"></a>1 下载安装Git LFS</h1><h2 id="1-1-下载Git-LFS"><a href="#1-1-下载Git-LFS" class="headerlink" title="1.1 下载Git LFS"></a>1.1 下载Git LFS</h2><p>Git LFS 下载链接：<a target="_blank" rel="noopener" href="https://github.com/git-lfs/git-lfs/releases">https://github.com/git-lfs/git-lfs/releases</a></p>


<h2 id="1-2-安装Git-LFS"><a href="#1-2-安装Git-LFS" class="headerlink" title="1.2 安装Git LFS"></a>1.2 安装Git LFS</h2><p>下载完成后，双击安装包，按照提示进行安装即可。</p>
<h1 id="2-使用Git-LFS"><a href="#2-使用Git-LFS" class="headerlink" title="2.使用Git LFS"></a>2.使用Git LFS</h1><h2 id="2-1-初始化并推送单个文件"><a href="#2-1-初始化并推送单个文件" class="headerlink" title="2.1 初始化并推送单个文件"></a>2.1 初始化并推送单个文件</h2><p>进入我的项目文件夹路径<code>C:\Users\tang xingyou\MyGithub\GRACE_GMT_scripts</code>，打开Git Bash，输入以下命令：</p>
<p>初始化仓库并安装LFS应用</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">git init<br>git <span class="hljs-keyword">lfs</span> install<br>git <span class="hljs-keyword">lfs</span> track *<br>git <span class="hljs-keyword">add</span> .gitattributes<br><br></code></pre></td></tr></table></figure>
<p>添加属性文件上传的说明：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> commit -m <span class="hljs-string">&quot;.gitattributes commit&quot;</span><br></code></pre></td></tr></table></figure>
<p>建立本地和 Github 仓库的链接（origin 后接自己仓库的链接）</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">git</span> remote <span class="hljs-keyword">add</span> origin https:<span class="hljs-comment">//github.com/SingyuTang/GRACE_GMT_scripts.git</span><br></code></pre></td></tr></table></figure>

<p>上传文件，推送到远程分支，远程仓库默认分支是 <code>main</code>，因此这里为main分支（可以使用<code>git branch</code>命令查看当前分支</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> -u <span class="hljs-built_in">origin</span> main<br></code></pre></td></tr></table></figure>

<p>注意，推送前可以使用<code>git ls-remote --heads origin</code>查看远程仓库分支，如果显示的是其他分支（如 master），需要推送到对应分支：</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> master<br></code></pre></td></tr></table></figure>

<p>或者将远程分支名称更改为 main（推荐）再推送：</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> main<br></code></pre></td></tr></table></figure>
<p>如果当前分支名称不是main，可使用命令<code>git branch -M main</code>将当前分支重命名为 main，并强制执行（如果目标分支名已经存在，将会覆盖它）。实际操作步骤如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">查看当前分支<br>git branch<br>如果当前分支名称不是 <span class="hljs-selector-tag">main</span>，可以使用以下命令重命名<br>git branch -M <span class="hljs-selector-tag">main</span><br>如果远程仓库使用的是 <span class="hljs-selector-tag">main</span> 分支，重命名本地分支后，需要更新远程的分支关联<br>git push <span class="hljs-attr">--set-upstream</span> origin <span class="hljs-selector-tag">main</span><br></code></pre></td></tr></table></figure>


<h2 id="2-2-推送全部文件"><a href="#2-2-推送全部文件" class="headerlink" title="2.2 推送全部文件"></a>2.2 推送全部文件</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">git</span> <span class="hljs-keyword">add</span> *<br><span class="hljs-symbol">git</span> commit -m <span class="hljs-string">&quot;Git LFS commit&quot;</span><br><span class="hljs-symbol">git</span> <span class="hljs-keyword">push</span> origin main<br></code></pre></td></tr></table></figure>
<h2 id="2-3-其它配置"><a href="#2-3-其它配置" class="headerlink" title="2.3 其它配置"></a>2.3 其它配置</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">设置为 <span class="hljs-number">0</span> 表示关闭低速检测，Git 不会因传输速度过低而中断连接<br>git config <span class="hljs-attr">--global</span> http<span class="hljs-selector-class">.lowSpeedLimit</span> <span class="hljs-number">0</span><br>设置为 <span class="hljs-number">99999</span> 表示允许长时间的低速传输<br>git config <span class="hljs-attr">--global</span> http<span class="hljs-selector-class">.lowSpeedTime</span> <span class="hljs-number">99999</span><br>支持更大的数据块传输<br>git config <span class="hljs-attr">--global</span> http<span class="hljs-selector-class">.postBuffer</span> <span class="hljs-number">157286400</span><br>清除当前远程仓库（origin）的代理设置，确保 Git 直接通过本地网络连接到远程仓库<br>git config <span class="hljs-attr">--global</span> <span class="hljs-attr">--add</span> remote<span class="hljs-selector-class">.origin</span><span class="hljs-selector-class">.proxy</span> <span class="hljs-string">&quot;&quot;</span><br>指定使用 OpenSSL 作为 Git 的 SSL 后端，用于处理 HTTPS 请求的加密通信，更稳定<br>git config <span class="hljs-attr">--global</span> http<span class="hljs-selector-class">.sslBackend</span> <span class="hljs-string">&quot;openssl&quot;</span><br>禁用 SSL 证书验证，忽略 HTTPS 请求中的证书检查。这样可以绕过证书相关的问题<br>git config <span class="hljs-attr">--global</span> http<span class="hljs-selector-class">.sslVerify</span> false<br><br></code></pre></td></tr></table></figure>

<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a target="_blank" rel="noopener" href="https://openatomworkshop.csdn.net/67400fc2cd8b2677c3e4ac18.html?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~activity-3-129878135-blog-129417749.235%5Ev43%5Epc_blog_bottom_relevance_base1&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~activity-3-129878135-blog-129417749.235%5Ev43%5Epc_blog_bottom_relevance_base1">GitHub 上传大文件（＞25 MB）教程</a>（推荐）</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mu_xing_/article/details/128285608?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Ctr-2-128285608-blog-129417749.235%5Ev43%5Epc_blog_bottom_relevance_base1&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Ctr-2-128285608-blog-129417749.235%5Ev43%5Epc_blog_bottom_relevance_base1">CSDN-GitHub上传大于25M的文件</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-GRACE-GRACE-FO-L2数据下载最新链接"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/09/29/GRACE-GRACE-FO-L2%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E6%9C%80%E6%96%B0%E9%93%BE%E6%8E%A5/">GRACE/GRACE-FO L2数据下载最新链接</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/09/29/GRACE-GRACE-FO-L2%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E6%9C%80%E6%96%B0%E9%93%BE%E6%8E%A5/" class="article-date">
	  <time datetime="2024-09-29T07:17:17.000Z" itemprop="datePublished">九月 29, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ICGEM（国际全球地球模型中心）"><a href="#ICGEM（国际全球地球模型中心）" class="headerlink" title="ICGEM（国际全球地球模型中心）"></a>ICGEM（国际全球地球模型中心）</h1><p>ICGEM收录目前所有可用的重力场模型月解数据（L2），不仅包括CSR，GFZ和JPL的GRACE Level-2产品，也包括其它组织机构发布的数据。这里主要介绍三家主要机构发布的产品，数据格式为”.gfc”，包含RL05、RL06，RL06.1，RL06.2。详细产品分类见下图。重力场模型数据下载点击<a target="_blank" rel="noopener" href="https://icgem.gfz-potsdam.de/sl/temporal">ICGEM官网链接</a>。</p>



<h1 id="CSR，GFZ，JPL"><a href="#CSR，GFZ，JPL" class="headerlink" title="CSR，GFZ，JPL"></a>CSR，GFZ，JPL</h1><p>目前，GFZ、JPL和CSR官方发布的L2 产品共有6种，CSR发布RL06以及RL06.2，JPL发布RL06和RL06.1，GFZ发布RL06和RL06.1.</p>
<p>id &#x3D; BA01 : 60阶</p>
<p>id &#x3D; BB01 : 96阶</p>
<p>CSR RL06: <a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2491772131-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=start_date&q=GRACE%20level-2&tl=1646814569!3!!">GRACE FIELD GEOPOTENTIAL COEFFICIENTS CSR RELEASE 6.0</a></p>
<p>2002-04-05 to 2017-06-30</p>
<p>GFZ RL06: <a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2491772132-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=start_date&g=G2562152220-POCLOUD&q=GRACE%20level-2&tl=1646814569!3!!&zoom=0">GRACE FIELD GEOPOTENTIAL COEFFICIENTS GFZ RELEASE 6.0</a></p>
<p>2002-04-05 to 2017-06-30</p>
<p>JPL RL06: <a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2491772133-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=start_date&q=GRACE%20level-2&tl=1646814569!3!!&zoom=0">GRACE FIELD GEOPOTENTIAL COEFFICIENTS JPL RELEASE 6.0</a></p>
<p>2002-04-05 to 2017-06-30</p>
<p>CSR RL06.2：<a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2753948997-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=-start_date&q=GRACE%20level-2&tl=1646814569!3!!&zoom=0">GRACE-FO Level-2 Monthly Geopotential Spherical Harmonics CSR Release 06.2 (RL06.2)</a></p>
<p>2018-05-22 ongoing</p>
<p>JPL RL06.1：<a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2257298823-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=-start_date&q=GRACE%20level-2&tl=1646814569!3!!&zoom=0">GRACE-FO Level-2 Monthly Geopotential Spherical Harmonics JPL Release 6.1 (RL06.1)</a></p>
<p>2018-05-22 ongoing</p>
<p>GFZ RL06.1：<a target="_blank" rel="noopener" href="https://search.earthdata.nasa.gov/search/granules?p=C2257298799-POCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=-start_date&q=GRACE%20level-2&tl=1646814569!3!!&zoom=0">GRACE-FO Level-2 Monthly Geopotential Spherical Harmonics GFZ Release 6.1 (RL06.1)</a></p>
<p>2018-05-22 ongoing</p>
<h1 id="一阶项和二阶项的文件下载"><a href="#一阶项和二阶项的文件下载" class="headerlink" title="一阶项和二阶项的文件下载"></a>一阶项和二阶项的文件下载</h1><p>fengweitoolbox包中需要用到的一阶项和二阶项文件下载链接如下。</p>
<h2 id="一阶项"><a href="#一阶项" class="headerlink" title="一阶项"></a>一阶项</h2><p>CSR：<a target="_blank" rel="noopener" href="https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_CSR_RL0601.txt">https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_CSR_RL0601.txt</a><br>GFZ：<a target="_blank" rel="noopener" href="https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_GFZ_RL0601.txt">https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_GFZ_RL0601.txt</a><br>JPL：<a target="_blank" rel="noopener" href="https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_JPL_RL0601.txt">https://archive.podaac.earthdata.nasa.gov/podaac-ops-cumulus-docs/grace/open/docs/TN-13_GEOC_JPL_RL0601.txt</a></p>
<p>如果下载链接失效，可跳转<a target="_blank" rel="noopener" href="https://podaac.jpl.nasa.gov/gravity/grace-documentation#TechnicalNotes">GRACE Documentation</a>查找对应文件进行下载。</p>
<h2 id="二阶项"><a href="#二阶项" class="headerlink" title="二阶项"></a>二阶项</h2><p><a target="_blank" rel="noopener" href="https://download.csr.utexas.edu/pub/slr/degree_2/">https://download.csr.utexas.edu/pub/slr/degree_2/</a></p>


<p>更多关于一阶项和二阶项的替换文件可参考文章：<a href="https://singyutang.github.io/2023/07/24/GRCE%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%AD%E5%8F%AF%E8%83%BD%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BD%91%E7%AB%99/">GRACE数据处理中可能用到的一些网站</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRACE/" rel="tag">GRACE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRACE-FO/" rel="tag">GRACE-FO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/websites/" rel="tag">websites</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-读后感-窄门"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/09/14/%E8%AF%BB%E5%90%8E%E6%84%9F-%E7%AA%84%E9%97%A8/">【读后感】-窄门</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/09/14/%E8%AF%BB%E5%90%8E%E6%84%9F-%E7%AA%84%E9%97%A8/" class="article-date">
	  <time datetime="2024-09-14T12:30:43.000Z" itemprop="datePublished">九月 14, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>作者：[法] 安德烈·纪德</p>
<h1 id="读后感"><a href="#读后感" class="headerlink" title="读后感"></a>读后感</h1><p>记于2024年9月14日晚</p>
<p>上学期购买的《窄门》这本书了，虽然全篇篇幅不长，但是一直不想看，今天突然想起很久没看书了，便拿起这本书看了起来，至于为什么买了那么多本书偏偏选择这一本呢，可能也是因为这本书篇幅不长，想以此来重新培养我的阅读兴趣罢了。</p>
<p>本书总体上来说可以称之为一本爱情小说，主要以男主人公杰罗姆（下文中以第一人称的口吻进行叙述）和女主人公阿莉莎之间的爱情为主线进行展开。杰罗姆的父亲在我还不满十二岁时去世了，母亲为了他的学业前往巴黎居住。在巴黎附近的勒阿弗尔附近的芬格斯玛尔农庄（巴黎市区内），舅舅布兰科居住在那里，女主人公阿莉莎（大我2岁）就是舅舅的长女，除阿莉莎以外，舅舅家还有一个表妹朱莉叶特（小我1岁）和表弟罗贝尔（小我两岁）。舅舅家的房子不大，因此我和母亲居住在了母亲的一个姐姐普朗提埃姨妈家里（巴黎郊区）。</p>
<p>阿莉莎小小年纪就已经知道妈妈出轨并承受了巨大的痛苦，而我在一次偶然的机会也发现了这一切，但我由于年龄尚小还不明白阿莉莎痛苦的缘由，但看到痛苦的阿莉莎，我便祈求上帝，今生今世愿意风险自己只求庇护这个女孩免受恐惧之苦和生活的伤害。</p>
<p>读的时候心情起伏很大，一度以为等到杰罗姆服完兵役回来就可以一直在一起了，在信里面他们的交谈是那么紧密，他们是那么的思念对方，在见面前他们俩的爱情是那么牢固，我在阅读时一直认为服完兵役后回来他们就可以在一起了，经历过异地恋的我对于这种心情是十分能理解，也是十分希望他们能修成正果的，可是偏偏作者却鬼使神工的将他们的命运与读者的意图相悖，全篇读完后觉得这一切都是合理的，下文再展开分析。</p>
<p>全书中多次提到“德行”、“追求”、“幸福”、“美德”，初读时常常忽略，这可能会导致在部分段落无法明白作者的意思，无法明白主人公为啥会有这种想法，只有当文章全部读完后从头来看才能明白。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E9%98%85%E8%AF%BB/">阅读</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AA%84%E9%97%A8/" rel="tag">窄门</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/" rel="tag">读后感</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-WRF-Hydro中的部分脚本更新"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/09/06/WRF-Hydro%E4%B8%AD%E7%9A%84%E9%83%A8%E5%88%86%E8%84%9A%E6%9C%AC%E6%9B%B4%E6%96%B0/">WRF-Hydro中的部分脚本更新一</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/09/06/WRF-Hydro%E4%B8%AD%E7%9A%84%E9%83%A8%E5%88%86%E8%84%9A%E6%9C%AC%E6%9B%B4%E6%96%B0/" class="article-date">
	  <time datetime="2024-09-05T20:28:33.000Z" itemprop="datePublished">九月 6, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="FNL和GFS数据介绍-WRF-WPS气象数据输入"><a href="#FNL和GFS数据介绍-WRF-WPS气象数据输入" class="headerlink" title="FNL和GFS数据介绍-WRF&#x2F;WPS气象数据输入"></a>FNL和GFS数据介绍-WRF&#x2F;WPS气象数据输入</h1><p>FNL再分析数据：常用的气象再分析数据；<br>GFS数据：最常用的气象预报数据。<br>除GFS&#x2F;FNL数据外，还可使用其它气象数据源作为输入，如NAM、RAP&#x2F;HRRR、重新分析（NARR、CFSR、NNRP、ERA-interim、ERA5 等）、其他 WRF 运行。详细可用数据源可查看<a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/users/wrf_users_guide/build/html/wps.html#function-of-each-wps-program">WRF-WPS</a></p>



<p>FNL（Final analyzed field）数据集和GFS（Global Forecast System）数据集虽有联系，但在同一资料同化和预报系统中却有不同的产品。它们基于相同的基础模型和数据同化技术，且包含相同的数据源。FNL是最终分析场，是经过同化处理后的结果，可以补充实时状态下没有收集齐全的某些观测资料。大部分情况下，FNL和GFS的初始场相近。FNL是再分析资料，获取方便，有长期的历史数据，而GFS官方只提供近几天的下载，获取历史数据比较麻烦。</p>
<p>FNL数据官网：<a target="_blank" rel="noopener" href="https://rda.ucar.edu/datasets/d083002/dataaccess/#">https://rda.ucar.edu/datasets/d083002/dataaccess/#</a></p>


<p>GFS官方数据下载：<a target="_blank" rel="noopener" href="https://nomads.ncep.noaa.gov/pub/data/nccf/com/gfs/prod/">https://nomads.ncep.noaa.gov/pub/data/nccf/com/gfs/prod/</a></p>



<h1 id="FNL数据下载脚本"><a href="#FNL数据下载脚本" class="headerlink" title="FNL数据下载脚本"></a>FNL数据下载脚本</h1><p>FNL可以作为WRF模型的输入数据，用于模型初始化和创建边界条件网格。<br>脚本下载链接：<a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/blob/main/fnl_download_for_wrf.py">https://github.com/SingyuTang/wrf_scripts/blob/main/fnl_download_for_wrf.py</a></p>
<h1 id="create-soilproperties-R脚本"><a href="#create-soilproperties-R脚本" class="headerlink" title="create_soilproperties.R脚本"></a>create_soilproperties.R脚本</h1><p>官方没有将GENPARM.TBL中的refdk, refkdt, slope参数和MPTABLE.TBL中的rsurf_exp参数添加到soil_properties.nc文件中，修改后的create_soilproperties_Zuo.R对这一特性进行了修复。</p>
<p>脚本下载链接：<a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/tree/main/create_soilproperties">https://github.com/SingyuTang/wrf_scripts/tree/main/create_soilproperties</a></p>
<h1 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h1><p><a target="_blank" rel="noopener" href="https://www.heywhale.com/mw/notebook/6476e6cd3f075e5cb1519a34">Model Whale - Workshop第一期：初探气象数据 Part2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/avivi/p/10880131.html">博客园 - GFS和Fnl文件的区别</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_64799803/article/details/137654097">CSDN - 运行WRF的常用气象场数据</a></p>
<p><a target="_blank" rel="noopener" href="http://bbs.06climate.com/forum.php?mod=viewthread&tid=104598">气象家园 - Fnl.Gfs的区别 </a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/avivi/p/14833263.html">博客园 - 跑 wrf 所需 fnl 数据下载</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44237337/article/details/137228430">CSDN - Real-data WRF | setup and run and experiment</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FNL/" rel="tag">FNL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R/" rel="tag">R</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF/" rel="tag">WRF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF-Hydro5-2-0/" rel="tag">WRF-Hydro5.2.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-使用ERA5-Land小时数据作为WRF-Hydro气象强迫数据输入"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/09/01/%E4%BD%BF%E7%94%A8ERA5-Land%E5%B0%8F%E6%97%B6%E6%95%B0%E6%8D%AE%E4%BD%9C%E4%B8%BAWRF-Hydro%E6%B0%94%E8%B1%A1%E5%BC%BA%E8%BF%AB%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/">使用ERA5_Land小时数据作为WRF-Hydro气象强迫数据输入</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/09/01/%E4%BD%BF%E7%94%A8ERA5-Land%E5%B0%8F%E6%97%B6%E6%95%B0%E6%8D%AE%E4%BD%9C%E4%B8%BAWRF-Hydro%E6%B0%94%E8%B1%A1%E5%BC%BA%E8%BF%AB%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5/" class="article-date">
	  <time datetime="2024-09-01T13:57:27.000Z" itemprop="datePublished">九月 1, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>本教程用于下载ERA5_Land数据处理作为WRF-Hydro FORCING输入数据（YYYYMMDDHH.LDASIN_DOMAINX），分为有降雨变量（total_precipitation）和无降雨变量（total_precipitation）两种处理方法。</p>
<h1 id="ERA5-Land数据下载"><a href="#ERA5-Land数据下载" class="headerlink" title="ERA5_Land数据下载"></a>ERA5_Land数据下载</h1><p><a target="_blank" rel="noopener" href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-land?tab=form">ERA5-Land hourly data from 1950 to present</a></p>
<p>下载变量：10m_u_component_of_wind’,                 ‘10m_v_component_of_wind’, ‘2m_dewpoint_temperature’,<br>            ‘2m_temperature’, ‘surface_pressure’, ‘surface_solar_radiation_downwards’,<br>            ‘surface_thermal_radiation_downwards’, ‘total_precipitation’</p>
<p>下载数据格式：Zipped NetCDF-3 (experimental)</p>
<p><em>根据需要代码选择是否下载total_precipitation变量</em></p>
<h1 id="处理代码下载"><a href="#处理代码下载" class="headerlink" title="处理代码下载"></a>处理代码下载</h1><p><a target="_blank" rel="noopener" href="https://github.com/SingyuTang/prepare_era5_land_for_wrf_hydro_forcing">prepare_era5_land_for_wrf_hydro_forcing</a></p>
<h1 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h1><p>  （1）创建文件夹input_files1；<br>  <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">mkdir input_files1<br></code></pre></td></tr></table></figure><br>  （2）读取处理ERA5数据变量；<br>  <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> read_era5_land_with_precipitaion.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><br>  （3）生成重新网格化权重网格文件；<br>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">ncl <span class="hljs-symbol">&#x27;interp_opt</span>=<span class="hljs-string">&quot;bilinear&quot;</span><span class="hljs-string">&#x27; &#x27;</span>srcGridName=<span class="hljs-string">&quot;input_files1/ERA5_025_1H.20060601.0100.nc4&quot;</span><span class="hljs-string">&#x27; &#x27;</span>dstGridName=<span class="hljs-string">&quot;geo_em.d03.nc&quot;</span>&#x27; ERA52WRFHydro_generate_weights.ncl<br></code></pre></td></tr></table></figure><br>  （4）重新网格化。<br>  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">ncl <span class="hljs-symbol">&#x27;srcFileName</span>=<span class="hljs-string">&quot;*.nc4&quot;</span><span class="hljs-string">&#x27; &#x27;</span>dstGridName=<span class="hljs-string">&quot;geo_em.d03.nc&quot;</span>&#x27; ERA52WRFHydro_regrid.ncl<br></code></pre></td></tr></table></figure></p>
<p><em>如果在代码运行过程中出现权限问题报错，运行以下代码给予权限</em><br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> -R 777 *<br></code></pre></td></tr></table></figure></p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Zf69Ot_KG2_KhuD1aWmFUA">应用ERA5-Land小时数据到WRF-hydro模型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ruo-li-suo-yi/p/7772777.html">博客园 - 温度、水汽压、湿度计算公式</a></p>
<p><a target="_blank" rel="noopener" href="https://www.fao.org/4/X0490E/x0490e07.htm">Crop evapotranspiration - Guidelines for computing crop water requirements - Chapter 3 Meteorological data - FAO Irrigation and drainage paper 56 </a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ERA5-Land/" rel="tag">ERA5_Land</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF-Hydro5-2-0/" rel="tag">WRF-Hydro5.2.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-运行WPS、WRF、WRF-Hydro的一些错误总结一"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/07/22/%E8%BF%90%E8%A1%8CWPS%E3%80%81WRF%E3%80%81WRF-Hydro%E7%9A%84%E4%B8%80%E4%BA%9B%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93%E4%B8%80/">运行WPS、WRF、WRF-Hydro的一些错误总结一</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/07/22/%E8%BF%90%E8%A1%8CWPS%E3%80%81WRF%E3%80%81WRF-Hydro%E7%9A%84%E4%B8%80%E4%BA%9B%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93%E4%B8%80/" class="article-date">
	  <time datetime="2024-07-22T03:50:07.000Z" itemprop="datePublished">七月 22, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="运行WRF-WRF-Hydro的一些错误经验"><a href="#运行WRF-WRF-Hydro的一些错误经验" class="headerlink" title="运行WRF&#x2F;WRF-Hydro的一些错误经验"></a>运行WRF&#x2F;WRF-Hydro的一些错误经验</h1><p>1.执行<code>mpirun -np 1 ./real.exe</code>命令，rsl.error.0000文件出现以下错误。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs textile"> metgrid input_wrf.F first_date_input = 2024-03-12_00:00:00<br> metgrid input_wrf.F first_date_nml = 2024-03-12_00:00:00<br> i_parent_start from namelist.input file =           53<br> i_parent_start from gridded input file  =           10<br> j_parent_start from namelist.input file =           25<br> j_parent_start from gridded input file  =           20<br>d02 2024-03-12_00:00:00 ---- ERROR: Nest start locations do not match: namelist.input vs gridded input file<br>NOTE:       1 namelist vs input data inconsistencies found.<br>-------------- FATAL CALLED ---------------<br>FATAL CALLED FROM FILE:  &lt;stdin&gt;  LINE:    1298<br></code></pre></td></tr></table></figure>

<p>解决办法：</p>
<blockquote>
<p>使namelist.wps和namelist.input两个文件中的 i_parent_start 和 j_parent_start 两个参数保持一致。</p>
</blockquote>
<p>2.操作：WRF-Hydro在执行xxx命令出现错误。</p>
<p>错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs textile">netcdf_layer.f90:77:19:            <br>    &amp;  comm = object%mpi_communicator, info = object%default_info)                    <br>1 Error: Keyword argument ‘comm’ at (1) is not in the procedure<br></code></pre></td></tr></table></figure>

<p>重新设置netcdf环境，参考<a href="https://singyutang.github.io/2024/03/23/%E5%A6%82%E4%BD%95%E5%9C%A8ubuntu16-04%E4%B8%8A%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91WRF-Hydro5-2-0/">教程</a>。</p>
<p>3.操作：安装netcdf-fortran，尽管我的netcdf-c的版本大于4.7.4依旧error。</p>
<p>错误：configure netcdf-fortran error，详细错误如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs textile">..l...<br>checking for nc_def_var_szip...no<br>configure:error:netcdf-c version 4.7.4 or greater is required.<br></code></pre></td></tr></table></figure>

<p>解决方案: 向<code>~/.bashrc</code>文件添加环境变量如下，主要是<code>LDFLAGS</code>变量和<code>CPPFLAGS</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs textile">## netcdf 4.9.2<br><br>export WRFHYDRO_DIR=~/coding/WRF_Hydro/LIBRARIES<br>export NETCDF=$WRFHYDRO_DIR/netcdf<br>export LDFLAGS=-L$NETCDF/lib<br>export CPPFLAGS=-I$NETCDF/include<br></code></pre></td></tr></table></figure>

<p>感谢<a target="_blank" rel="noopener" href="https://github.com/Unidata/netcdf-fortran/issues/299">WardF</a>的回答，同时参考了他的<a target="_blank" rel="noopener" href="https://github.com/Unidata/netcdf-fortran/issues/278">另一次解答</a>。</p>
<p>4.利用3的解决方案解决了错误后出现了另外一个错误。错误大致如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs textile">configure error: netcdf could not link to netcdfc library.Please set LDFLAGS;<br>for static builds set LIBS to the results fo nc-config--libs ....<br></code></pre></td></tr></table></figure>

<p>解决方案：没能直接解决这个问题。也参考过别的博客上在环境变量中添加或更改<code>LDFLAGS</code>和<code>LIBS</code>的值依旧未成功，在<code>configure</code>时添加这两个参数也未成功。最终通过在<code>/usr/local/netcdf4</code>中新建了一个netcdf环境才解决，相应的安装教程和环境设置参考xxx。虽然没能查明原因，但是很大可能是因为在安装netcdf-fortran时netcdf-c库、netcdf-fortran库、zlib库、hdf5库和curl库的安装位置和安装顺序的原因，在教程xxx中将其放在同个位置下进行另一个版本的netcdf安装并重新设置环境变量就解决了这个问题。</p>
<p>综合3和4，出现这两个错误的很大程度上的原因是因为通过教程安装的netcdf版本为v4.1.3，不满足运行WRF-Hydro的条件，WRF-Hydro运行的netcdf版本为v4.4+。</p>
<p>5.操作：在WRF-Hydro中执行<code>./compile_offline_Noah.sh setEnvar.sh</code></p>
<p>错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs textile">f951: Warning: Nonexistent include directory ‘/home/root123/coding/WRF/Build_WRF/LIBRARIES/netcdf/include’ [-Wmissing-include-dirs]<br>netcdf_layer.f90:2:6:<br><br>   use netcdf<br>      1<br>Fatal Error: Can&#x27;t open module file ‘netcdf.mod’ for reading at (1): 没有那个文件或目录<br>compilation terminated.<br></code></pre></td></tr></table></figure>

<p>解决方案：netcdf版本不够，升级版本，参考<a href="https://singyutang.github.io/2024/03/23/%E5%A6%82%E4%BD%95%E5%9C%A8ubuntu16-04%E4%B8%8A%E5%AE%89%E8%A3%85%E7%BC%96%E8%AF%91WRF-Hydro5-2-0/">安装教程</a>。</p>
<p>6.[错误] 运行命令<code> mpirun -np 4 ./wrf_hydro.exe &gt; log</code>出现错误</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs vhdl"> Calling config noahlsm_offline<br> Calling config noahlsm_offline<br> Calling config noahlsm_offline<br> Calling config noahlsm_offline<br><span class="hljs-literal">WARNING</span>:  LDASIN <span class="hljs-keyword">file</span> has a perverse version identifier<br>ldasin_version =        <span class="hljs-number">0</span><br><span class="hljs-literal">WARNING</span>:  LDASIN <span class="hljs-keyword">file</span> has a perverse version identifier<br>ldasin_version =        <span class="hljs-number">0</span><br><span class="hljs-literal">WARNING</span>:  LDASIN <span class="hljs-keyword">file</span> has a perverse version identifier<br>ldasin_version =        <span class="hljs-number">0</span><br><span class="hljs-literal">WARNING</span>:  LDASIN <span class="hljs-keyword">file</span> has a perverse version identifier<br>ldasin_version =        <span class="hljs-number">0</span><br><br><br><br><br><br><br><br><br> SNOW HEIGHT <span class="hljs-keyword">NOT</span> FOUND - VALUE DEFINED <span class="hljs-keyword">IN</span> LSMINIT<br> SNOW HEIGHT <span class="hljs-keyword">NOT</span> FOUND - VALUE DEFINED <span class="hljs-keyword">IN</span> LSMINIT<br> SNOW HEIGHT <span class="hljs-keyword">NOT</span> FOUND - VALUE DEFINED <span class="hljs-keyword">IN</span> LSMINIT<br> SNOW HEIGHT <span class="hljs-keyword">NOT</span> FOUND - VALUE DEFINED <span class="hljs-keyword">IN</span> LSMINIT<br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> <span class="hljs-comment">---</span><br> FATAL <span class="hljs-literal">ERROR</span>! Program stopped. Recompile <span class="hljs-keyword">with</span> environment <span class="hljs-keyword">variable</span> HYDRO_D set <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> enhanced debug information.<br><br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> <span class="hljs-comment">---</span><br> FATAL <span class="hljs-literal">ERROR</span>! Program stopped. Recompile <span class="hljs-keyword">with</span> environment <span class="hljs-keyword">variable</span> HYDRO_D set <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> enhanced debug information.<br><br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> <span class="hljs-comment">---</span><br> FATAL <span class="hljs-literal">ERROR</span>! Program stopped. Recompile <span class="hljs-keyword">with</span> environment <span class="hljs-keyword">variable</span> HYDRO_D set <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> enhanced debug information.<br><br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> <span class="hljs-comment">---</span><br> FATAL <span class="hljs-literal">ERROR</span>! Program stopped. Recompile <span class="hljs-keyword">with</span> environment <span class="hljs-keyword">variable</span> HYDRO_D set <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> enhanced debug information.<br><br><br>===================================================================================<br>=   BAD TERMINATION <span class="hljs-keyword">OF</span> ONE <span class="hljs-keyword">OF</span> YOUR APPLICATION PROCESSES<br>=   <span class="hljs-keyword">EXIT</span> CODE: <span class="hljs-number">1</span><br>=   CLEANING UP REMAINING PROCESSES<br>=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES<br>===================================================================================<br></code></pre></td></tr></table></figure>

<p>解决方案:重新编译wrf-hydro，在setEnvar.sh文件中调整WRF_HYDRO参数为</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">HYDRO_D</span>=1<br></code></pre></td></tr></table></figure>

<p>重新编译</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./configure</span><br><span class="hljs-string">./compile_offline_NoahMP.sh</span> <span class="hljs-keyword">set</span>Envar.sh<br></code></pre></td></tr></table></figure>

<p>7.[错误]运行命令 <code>mpirun -np 4 ./wrf_hydro.exe &gt; log</code>出现错误</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vhdl"> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. hydro.namelist <span class="hljs-literal">ERROR</span>: Please specify a udmap_file <span class="hljs-keyword">file</span>.<br><br>===================================================================================<br>=   BAD TERMINATION <span class="hljs-keyword">OF</span> ONE <span class="hljs-keyword">OF</span> YOUR APPLICATION PROCESSES<br>=   <span class="hljs-keyword">EXIT</span> CODE: <span class="hljs-number">1</span><br>=   CLEANING UP REMAINING PROCESSES<br>=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES<br>===================================================================================<br></code></pre></td></tr></table></figure>

<p>解决方案：修改 hydro.namelist 文件中的UDMP_OPT参数和udmap_file参数</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">UDMP_OPT</span> = <span class="hljs-number">0</span><br><span class="hljs-attr">udmap_file</span> = <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure>

<p>8.[错误]运行命令 <code>mpirun -np 4 ./wrf_hydro.exe</code>出现错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">*** Error <span class="hljs-keyword">in</span> `./wrf_hydro.exe<span class="hljs-string">&#x27;: free(): invalid next size (fast): 0x000000001dafcb80 ***</span><br><span class="hljs-string">*** Error in `./wrf_hydro.exe&#x27;</span>: munmap_chunk(): invalid pointer: 0x000000001bd0e9f0 ***<br>======= Backtrace: =========<br>======= Backtrace: =========<br>/lib/x86_64-linux-gnu/libc.so.6(+0x777f5)[0x7f480ffc37f5]<br>/lib/x86_64-linux-gnu/libc.so.6(+0x777f5)[0x7f7f0b95a7f5]<br>/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7f480ffd06e8]<br>......<br>......<br>......<br><span class="hljs-comment">#13  0x46E9B9 in __module_noahmp_hrldas_driver_MOD_land_driver_ini</span><br><span class="hljs-comment">#9  0x4A1404 in __module_hydro_io_MOD_read_routelink</span><br><span class="hljs-comment">#10  0x55D48A in __module_routing_MOD_landrt_ini</span><br><span class="hljs-comment">#11  0x52A6FA in __module_hydro_drv_MOD_hydro_ini</span><br><span class="hljs-comment">#12  0x52C889 in __module_hrldas_hydro_MOD_hrldas_cpl_hydro_ini</span><br><span class="hljs-comment">#13  0x52FB65 in hrldas_drv_hydro_ini_</span><br><span class="hljs-comment">#14  0x46E9B9 in __module_noahmp_hrldas_driver_MOD_land_driver_ini</span><br></code></pre></td></tr></table></figure>

<p>不使用mpirun命令执行<code>./wrf_hydro.exe</code></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">RNING: KDAY is deprecated <span class="hljs-keyword">and</span> may be removed <span class="hljs-keyword">in</span> <span class="hljs-keyword">a</span> future <span class="hljs-built_in">version</span>, please use KHOUR.<br>WARNING: In land_driver_ini() - KHOUR &lt; <span class="hljs-number">0.</span> DEFINED USING KDAY.<br>WARNING:  LDASIN <span class="hljs-built_in">file</span> has <span class="hljs-keyword">a</span> perverse <span class="hljs-built_in">version</span> identifier<br>ldasin_version =        <span class="hljs-number">0</span><br><br><br> SNOW HEIGHT NOT FOUND - VALUE DEFINED IN LSMINIT<br>getting dimension <span class="hljs-built_in">from</span> <span class="hljs-built_in">file</span>: ./DOMAIN/Route_Link.nc<br> reading <span class="hljs-built_in">from</span> hydrotbl_f(HYDRO.TBL.nc)  <span class="hljs-built_in">file</span> ....<br> WARNING: get2d_real: failed <span class="hljs-built_in">to</span> find <span class="hljs-keyword">the</span> variables: CHAN_DEPTH <span class="hljs-keyword">and</span> CHAN_DEPTH                                                                                                                                                                                    <br> compound_channel is <span class="hljs-literal">FALSE</span> <span class="hljs-keyword">in</span> hydro.namelist.<br> <span class="hljs-built_in">read</span> gwbasmskfil <span class="hljs-keyword">as</span> nc <span class="hljs-built_in">format</span>: ./DOMAIN/GWBASINS.nc<br> <span class="hljs-built_in">read</span> GWBUCKPARM <span class="hljs-built_in">file</span> <span class="hljs-keyword">as</span> nc <span class="hljs-built_in">format</span>: ./DOMAIN/GWBUCKPARM.nc<br> Resetting RESTART Accumulation Variables <span class="hljs-built_in">to</span> <span class="hljs-number">0.</span>..           <span class="hljs-number">1</span><br>application called MPI_Abort(comm=<span class="hljs-number">0x84000000</span>, <span class="hljs-number">1</span>) - <span class="hljs-built_in">process</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p>使用<code>./wrf_hydro.exe &gt; log</code>打印日志文件，log文件中的错误意思差不多为</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dns">无法找到wrfout_d<span class="hljs-number">01_2024-02</span>-<span class="hljs-number">01_00:00:00</span>相关forcing数据<br></code></pre></td></tr></table></figure>

<p>解决方案</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">FORCING文件夹中的文件名不能使用wrfout<span class="hljs-emphasis">_d02_</span><span class="hljs-emphasis">*，必须使用wrfout_d01_*</span>，<br>如果要使用d02的数据也必须重命名为d01<br></code></pre></td></tr></table></figure>

<p>9.[错误]运行命令 <code>mpirun -np 4 ./wrf_hydro.exe</code>出现错误</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> starting wrf task            0  of            4</span><br><span class="hljs-code"> starting wrf task            1  of            4</span><br><span class="hljs-code"> starting wrf task            2  of            4</span><br><span class="hljs-code"> starting wrf task            3  of            4</span><br><br>===================================================================================<br>=   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES<br>=   EXIT CODE: 139<br>=   CLEANING UP REMAINING PROCESSES<br>=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES<br>===================================================================================<br>YOUR APPLICATION TERMINATED WITH THE EXIT STRING: Segmentation fault (signal 11)<br>This typically refers to a problem with your application.<br>Please see the FAQ page for debugging suggestions<br></code></pre></td></tr></table></figure>

<p>解决方案</p>
<p>减小时间步长，同时能够被时间间隔整除，history_interval是积分步长time_step的整数倍</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp;domains</span><br>time_step <br></code></pre></td></tr></table></figure>

<p>分辨率太高，区域太大，内存不足，参数化方案更换（微物理方案）</p>
<p>10.利用i_parent_start和e_we选择WRF domain的问题</p>
<p>i_parent_start和e_we相关</p>
<p>j_parent_start和e_sn相关</p>
<p>11.运行命令<code>./metgrid.exe</code>报错</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">Processing domain 1 of 3<br><span class="hljs-code"> Processing 2024-02-01_00</span><br><span class="hljs-code">    FILE</span><br><span class="hljs-symbol">WARNING: </span>Field PRES has missing values at level 200100 at (i,j)=(1,1)<br><span class="hljs-symbol">WARNING: </span>Field PMSL has missing values at level 200100 at (i,j)=(1,1)<br><span class="hljs-symbol">WARNING: </span>Field PSFC has missing values at level 200100 at (i,j)=(1,1)<br>ERROR: Missing values encountered in interpolated fields. Stopping.<br>application called MPI_Abort(MPI_COMM_WORLD, 0) - process 0<br></code></pre></td></tr></table></figure>

<p>ERA5数据范围比domain小，重新下载</p>
<p>12.运行<code>./wrf_hydro.exe</code>报错</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tap">......<br>......<br>(Near) match for destination layer:  Taking destination layer at  0.7000 from source layer at  0.7000<br>(Near) match for destination layer:  Taking destination layer at  1.5000 from source layer at  1.5000<br> xstart,xend, ystart, yend          <span class="hljs-number"> 1 </span>       <span class="hljs-number"> 159 </span>         <span class="hljs-number"> 1 </span>        159<br> xstart,xend, ystart, yend          <span class="hljs-number"> 1 </span>       <span class="hljs-number"> 159 </span>         <span class="hljs-number"> 1 </span>        159<br> xstart,xend, ystart, yend          <span class="hljs-number"> 1 </span>       <span class="hljs-number"> 159 </span>         <span class="hljs-number"> 1 </span>        159<br> xstart,xend, ystart, yend          <span class="hljs-number"> 1 </span>       <span class="hljs-number"> 159 </span>         <span class="hljs-number"> 1 </span>        159<br>  SOIL TEXTURE CLASSIFICATION = STAS FOUND         <span class="hljs-number"> 19 </span> CATEGORIES<br> SNOW HEIGHT NOT FOUND - VALUE DEFINED IN LSMINIT<br> NTIME =         <span class="hljs-number"> 216 </span>KHOUR=        <span class="hljs-number"> 216 </span>dtbl =    3600.00000    <br> zsoil/soil_thick_input =   0.100000001      0.300000012      0.600000024       1.00000000    <br> The job is stopped due to the fatal error. HYDRO_nlst namelist error in read_rt_nlst<br>application called MPI_Abort(comm=0x84000000, 1) - process 0<br></code></pre></td></tr></table></figure>

<p>解决方案</p>
<p>hydro.namelist中的变量格式错误，我这里是这样的（不知道什么时候弄得）</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">GWBUCKPARM_file = <span class="hljs-string">&quot;./DOMAIN/</span><br><span class="hljs-string">GWBUCKPARM.nc&quot;</span><br><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span>.<br></code></pre></td></tr></table></figure>

<p>需更改为</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">GWBUCKPARM_file</span> = <span class="hljs-string">&quot;./DOMAIN/GWBUCKPARM.nc&quot;</span><br></code></pre></td></tr></table></figure>

<p>3.运行命令   <code>./wrf_hydro.exe</code>报错</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">PrPt</span>/LkIn   <span class="hljs-number">0</span> *** ********** ********* <span class="hljs-number">1588</span> <span class="hljs-number">1590</span><br><span class="hljs-attribute">PrPt</span>/LkIn   <span class="hljs-number">0</span> *** ********** ********* <span class="hljs-number">1589</span> <span class="hljs-number">1590</span><br><span class="hljs-attribute">PrPt</span>/LkIn   <span class="hljs-number">0</span> *** ********** ********* <span class="hljs-number">1590</span> <span class="hljs-number">1590</span><br> <span class="hljs-attribute">found</span> type <span class="hljs-number">0</span> nodes         <span class="hljs-number">291</span><br> <span class="hljs-attribute">total</span> number of channel elements         <span class="hljs-number">292</span><br> <span class="hljs-attribute">total</span> number of NLINKS               <span class="hljs-number">2528100</span><br> <span class="hljs-attribute">Apparent</span> error in network topology         <span class="hljs-number">292</span>     <span class="hljs-number">2528100</span><br> <span class="hljs-attribute">ixrt</span> =        <span class="hljs-number">1590</span> jxrt =        <span class="hljs-number">1590</span><br> <span class="hljs-attribute">The</span> job is stopped due to the fatal error. READ_ROUTEDIM<br><span class="hljs-attribute">application</span> called MPI_Abort(comm=<span class="hljs-number">0</span>x84000000, <span class="hljs-number">1</span>) - process <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p>终端打印的错误中开始报错的位置及信息如下</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs lasso">(Near) <span class="hljs-keyword">match</span> for destination layer:  Taking destination layer at  <span class="hljs-number">1.5000</span> from source layer at  <span class="hljs-number">1.5000</span><br> xstart,xend, ystart, yend           <span class="hljs-number">1</span>         <span class="hljs-number">159</span>           <span class="hljs-number">1</span>         <span class="hljs-number">159</span><br> xstart,xend, ystart, yend           <span class="hljs-number">1</span>         <span class="hljs-number">159</span>           <span class="hljs-number">1</span>         <span class="hljs-number">159</span><br> xstart,xend, ystart, yend           <span class="hljs-number">1</span>         <span class="hljs-number">159</span>           <span class="hljs-number">1</span>         <span class="hljs-number">159</span><br> xstart,xend, ystart, yend           <span class="hljs-number">1</span>         <span class="hljs-number">159</span>           <span class="hljs-number">1</span>         <span class="hljs-number">159</span><br>  SOIL TEXTURE CLASSIFICATION = STAS FOUND          <span class="hljs-number">19</span>  CATEGORIES<br> SNOW HEIGHT <span class="hljs-literal">NOT</span> FOUND - VALUE DEFINED <span class="hljs-keyword">IN</span> LSMINIT<br> NTIME =          <span class="hljs-number">216</span> KHOUR=         <span class="hljs-number">216</span> dtbl =    <span class="hljs-number">3600.00000</span>    <br> zsoil/soil_thick_input =   <span class="hljs-number">0.100000001</span>      <span class="hljs-number">0.300000012</span>      <span class="hljs-number">0.600000024</span>       <span class="hljs-number">1.00000000</span>    <br> rt_domain(did)%g_IXRT, rt_domain(did)%g_JXRT, rt_domain(did)%ixrt, rt_domain(did)%jxrt<br>        <span class="hljs-number">1431</span>        <span class="hljs-number">1431</span>        <span class="hljs-number">1431</span>        <span class="hljs-number">1431</span><br> rt_domain(did)%ix, rt_domain(did)%jx <br>         <span class="hljs-number">159</span>         <span class="hljs-number">159</span><br> global_nx, global_ny, local_nx, local_ny<br>         <span class="hljs-number">159</span>         <span class="hljs-number">159</span>         <span class="hljs-number">159</span>         <span class="hljs-number">159</span><br> Channel Option <span class="hljs-keyword">in</span> Routedim is            <span class="hljs-number">3</span><br> get2d_int: failed <span class="hljs-keyword">to</span> read the <span class="hljs-built_in">variable</span>: CHANNELGRID <span class="hljs-keyword">in</span> ./DOMAIN/Fulldom_hires.nc<br> read LINKID for CH_LNKRT from ./DOMAIN/Fulldom_hires.nc<br> get2d_int: failed <span class="hljs-keyword">to</span> read the <span class="hljs-built_in">variable</span>: FLOWDIRECTION <span class="hljs-keyword">in</span> ./DOMAIN/Fulldom_hires.nc<br> get2d_int: failed <span class="hljs-keyword">to</span> read the <span class="hljs-built_in">variable</span>: LAKEGRID <span class="hljs-keyword">in</span> ./DOMAIN/Fulldom_hires.nc<br> WARNING: get2d_real: failed <span class="hljs-keyword">to</span> read the <span class="hljs-built_in">variable</span>: LATITUDE <span class="hljs-literal">or</span> LATITUDE<br> WARNING: get2d_real: failed <span class="hljs-keyword">to</span> read the <span class="hljs-built_in">variable</span>: LONGITUDE <span class="hljs-literal">or</span> LONGITUDE<br> NLINKS IS      <span class="hljs-number">2047761</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">1</span>    <span class="hljs-number">1</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">2</span>    <span class="hljs-number">1</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">3</span>    <span class="hljs-number">1</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">4</span>    <span class="hljs-number">1</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">5</span>    <span class="hljs-number">1</span><br>PrPt/LkIn   <span class="hljs-number">0</span> *** ********** *********    <span class="hljs-number">6</span>    <span class="hljs-number">1</span><br><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span>.<br><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span>.<br><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span>.<br><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span><span class="hljs-params">...</span>.<br></code></pre></td></tr></table></figure>

<p>分析</p>
<p>与AGGFACTRT有关，具体原因未知。目前想到的办法就是提高geo_em.d01的分辨率或者尽可能使用小的AGGFACTRT，大的DXRT（但是这个一般在洪水预测中低于300），所以只能提高geo_em.d01的分辨率。</p>
<p>一个很大可能性的原因：根据错误出现开始的位置，报错信息与Fulldom_hires文件有关，可能是Fulldom_hires中的变量和geo_em.d01、FORCING的分辨率冲突。分析如下：在WPS GIS Preprocessing工具箱中有一个参数为Ridgridding Factor，可计算Routing Resolution &#x3D; GEOGRID Resolution &#x2F; Regridding Factor. 包括Fulldom_hires文件在内的由WPS GIS Preprocessing工具箱生成的所有变量分辨率都为Routing Resolution，FORCING的分辨率与geo_em.d01的分辨率相同，如果AGGFACTRT和DXRT设置不恰当，geo_em.d01与FORCING生成的子网格的分辨率就和Fulldom_hires的分辨率对不上，就会出现上述错误。</p>
<p>与DOMAIN中是否有海洋无关。</p>
<p>解决方案</p>
<p>公式：Routing Resolution &#x3D; GEOGRID Resolution &#x2F; Regridding Factor</p>
<p>            GEOGRID Resolution &#x3D; AGGFACTRT × DXRT</p>
<p>预测洪水要求子网格大小 DXRT &lt; 300m</p>
<p>假设DXRT 取300m，geo_em.d01的分辨率为3km，则Routing Resolution为300m，推导得出Regridding Factor为10，AGGFACTRT等于10。</p>
<p>14.运行命令<code>./wrf.exe</code>或<code>mpirun -np 2 ./wrf.exe</code>出现段错误。</p>
<p>物理参数使用默认。参数错误？格网点太多？分辨率太低或太高？内存不够？我使用两个（27和9km）或三个域（27、9、3km）运行时就会出错，用一个域（3km）跑模型的时候就不会，是不是证明和内存有关。</p>
<p>15.使用NLDAS重新网格化后的数据（已经替换NAN值）作为FORCING数据运行<code>mpirun -np 6 ./wrf_hydro.exe</code>报错，通过diag_hydro.00000文件查看</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">t0OutputFlag</span>:            <span class="hljs-number">1</span><br><span class="hljs-attribute">read</span> forcing data at <span class="hljs-number">2024</span>-<span class="hljs-number">02</span>-<span class="hljs-number">01</span>_00:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>./FORCING/<span class="hljs-number">2024020101</span>.LDASIN_DOMAIN1<br><span class="hljs-attribute">name</span> = <span class="hljs-string">&quot;T2D&quot;</span><br><span class="hljs-attribute">The</span> job is stopped due to the fatal error. In get_2d_netcdf() - nf90_get_var problem<br></code></pre></td></tr></table></figure>

<p>FORCING中的LDASIN_DOMAIN1类型数据覆盖范围与DOMAIN中的geo_em.d01数据覆盖范围不匹配，一开始我以为FORCING是全球覆盖的，就直接拷贝了过来，后来可视化发现覆盖范围对不上，一定要用geo_em.d01数据和NLDAS数据重新网格化，保证LDASIN_DOMAI数据是DOMAIN中的geo_em.d01生成。</p>
<p>16.<code>mpirun -np 4 ./wrf_hydro.exe</code></p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vhdl"> get2d_int: failed <span class="hljs-keyword">to</span> read the <span class="hljs-keyword">variable</span>: LAKEGRID <span class="hljs-keyword">in</span> ./DOMAIN/Fulldom_hires.nc<br> <span class="hljs-literal">WARNING</span>: get2d_real: failed <span class="hljs-keyword">to</span> read the <span class="hljs-keyword">variable</span>: LATITUDE <span class="hljs-keyword">or</span> LATITUDE<br> <span class="hljs-literal">WARNING</span>: get2d_real: failed <span class="hljs-keyword">to</span> read the <span class="hljs-keyword">variable</span>: LONGITUDE <span class="hljs-keyword">or</span> LONGITUDE<br> Apparent <span class="hljs-literal">error</span> <span class="hljs-keyword">in</span> network topology           <span class="hljs-number">4</span>       <span class="hljs-number">13967</span><br> ixrt =         <span class="hljs-number">150</span> jxrt =         <span class="hljs-number">160</span><br> The job <span class="hljs-keyword">is</span> stopped due <span class="hljs-keyword">to</span> the fatal <span class="hljs-literal">error</span>. READ_ROUTEDIM<br> <span class="hljs-comment">---</span><br> FATAL <span class="hljs-literal">ERROR</span>! Program stopped. Recompile <span class="hljs-keyword">with</span> environment <span class="hljs-keyword">variable</span> HYDRO_D set <span class="hljs-keyword">to</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> enhanced debug information.<br><br>application called MPI_Abort(comm=<span class="hljs-number">0</span>x84000004, <span class="hljs-number">1</span>) - <span class="hljs-keyword">process</span> <span class="hljs-number">0</span><br><br>===================================================================================<br>=   BAD TERMINATION <span class="hljs-keyword">OF</span> ONE <span class="hljs-keyword">OF</span> YOUR APPLICATION PROCESSES<br>=   <span class="hljs-keyword">EXIT</span> CODE: <span class="hljs-number">1</span><br>=   CLEANING UP REMAINING PROCESSES<br>=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES<br>===================================================================================<br></code></pre></td></tr></table></figure>

<p>调整DXRT和AGGFACTRT参数，DXRT×AGGFACTRT&#x3D;geo_dem.d0*分辨率</p>
<p>17.<code>mpirun -np 4 ./ungrib.exe</code>报错，错误位于ungrib.log。错误如下</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">...<br>...<br><span class="hljs-number">2024-07-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">04:32.899</span> ---       <span class="hljs-number">200</span>         X         -         X         X         X         X         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         - <br><span class="hljs-number">2024-07-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">04:32.902</span> ---       <span class="hljs-number">100</span>         X         -         X         X         X         X         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         -         - <br><span class="hljs-number">2024-07-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">04:32.906</span> --- -------------------------------------------------<br><span class="hljs-number">2024-07-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">04:36.462</span> --- INFORM: First pass done, doing a reprocess<br><span class="hljs-number">2024-07-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">04:36.485</span> --- ERROR: unknown out_format, ifv = <span class="hljs-number">1176463528</span><br></code></pre></td></tr></table></figure>

<p>解决办法; 不能使用mpirun运行ungrib.exe</p>
<h1 id="其他错误参考资料"><a href="#其他错误参考资料" class="headerlink" title="其他错误参考资料"></a>其他错误参考资料</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhangyimings/article/details/128979015">CSDN-WRF报错记录</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/517219915">知乎-WRF模型模拟时所遇到的问题及解决方法</a></p>
<p><a target="_blank" rel="noopener" href="https://wk-atmchem.github.io/2021/06/03/WRFCMAQ-bugandSolutions/">WRF常见bug及解决方案</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/stanlyYP/article/details/127365156">CSDN-WRF-Hydro运行过程与错误总结</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WPS4-5-0/" rel="tag">WPS4.5.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF-Hydro5-2-0/" rel="tag">WRF-Hydro5.2.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF4-5-2/" rel="tag">WRF4.5.2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu16-04/" rel="tag">ubuntu16.04</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93/" rel="tag">错误总结</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-WRF-Hydro使用中与NLDAS相关的处理脚本"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/07/15/WRF-Hydro%E4%BD%BF%E7%94%A8%E4%B8%AD%E4%B8%8ENLDAS%E7%9B%B8%E5%85%B3%E7%9A%84%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/">WRF-Hydro使用的一些处理脚本</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2024/07/15/WRF-Hydro%E4%BD%BF%E7%94%A8%E4%B8%AD%E4%B8%8ENLDAS%E7%9B%B8%E5%85%B3%E7%9A%84%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/" class="article-date">
	  <time datetime="2024-07-15T10:18:50.000Z" itemprop="datePublished">七月 15, 2024</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="NLDAS下载脚本"><a href="#NLDAS下载脚本" class="headerlink" title="NLDAS下载脚本"></a>NLDAS下载脚本</h1><p>访问github访问链接：<a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/blob/main/download_NLDAS_FORCNG.py">Here</a></p>
<h1 id="NLDAS变量NAN替换脚本"><a href="#NLDAS变量NAN替换脚本" class="headerlink" title="NLDAS变量NAN替换脚本"></a>NLDAS变量NAN替换脚本</h1><p><a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/blob/main/NLDAS_regrid_data_replaceNAN.py">Here</a></p>
<h1 id="NLDAS重新格网化脚本"><a href="#NLDAS重新格网化脚本" class="headerlink" title="NLDAS重新格网化脚本"></a>NLDAS重新格网化脚本</h1><p><a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/tree/main/ESMFregrid_NLDAS">Here</a></p>
<h1 id="GPM数据绘图脚本"><a href="#GPM数据绘图脚本" class="headerlink" title="GPM数据绘图脚本"></a>GPM数据绘图脚本</h1><p><a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/blob/main/GPM_draw.py">Here</a></p>
<h1 id="绘制WRF-Hydro输出文件CHRTOUT中的streamflow专题地图和时序图脚本"><a href="#绘制WRF-Hydro输出文件CHRTOUT中的streamflow专题地图和时序图脚本" class="headerlink" title="绘制WRF-Hydro输出文件CHRTOUT中的streamflow专题地图和时序图脚本"></a>绘制WRF-Hydro输出文件CHRTOUT中的streamflow专题地图和时序图脚本</h1><p><a target="_blank" rel="noopener" href="https://github.com/SingyuTang/wrf_scripts/blob/main/plot_CHRTOUT_streamflow_map.py">Here</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLDAS/" rel="tag">NLDAS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF/" rel="tag">WRF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WRF-Hydro5-2-0/" rel="tag">WRF-Hydro5.2.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%98%E5%9B%BE/" rel="tag">绘图</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" 搜索…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="搜索">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">联系我们</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a target="_blank" rel="noopener" href="https://github.com/SingyuTang" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:mailto:xingyoutang109@163.com?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a target="_blank" rel="noopener" href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a target="_blank" rel="noopener" href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a target="_blank" rel="noopener" href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a target="_blank" rel="noopener" href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a target="_blank" rel="noopener" href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a target="_blank" rel="noopener" href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>最新文章</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/09/22/gravity-toolkit%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E4%B8%80/">gravity-toolkit安装和使用笔记整理一</a></h6>
              <span>九月 22, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/09/22/hello-world/">Hello World</a></h6>
              <span>九月 22, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/01/07/GRACE%E4%B8%AD%E7%9A%84MASCON%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E7%AE%80%E4%BB%8B/">GRACE中的Mascons数据最新下载简介</a></h6>
              <span>一月 7, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/01/05/GitHub%E5%A6%82%E4%BD%95%E4%B8%8A%E4%BC%A0%E5%A4%A7%E4%BA%8E25MB%E7%9A%84%E6%96%87%E4%BB%B6/">GitHub如何上传大于25MB的文件</a></h6>
              <span>一月 5, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2024/09/29/GRACE-GRACE-FO-L2%E6%95%B0%E6%8D%AE%E4%B8%8B%E8%BD%BD%E6%9C%80%E6%96%B0%E9%93%BE%E6%8E%A5/">GRACE/GRACE-FO L2数据下载最新链接</a></h6>
              <span>九月 29, 2024</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2024/09/14/%E8%AF%BB%E5%90%8E%E6%84%9F-%E7%AA%84%E9%97%A8/">【读后感】-窄门</a></h6>
              <span>九月 14, 2024</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a><span class="category-list-count">33</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%98%85%E8%AF%BB/">阅读</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda3/" rel="tag">Anaconda3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArcGIS/" rel="tag">ArcGIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArcGIS-Pro/" rel="tag">ArcGIS Pro</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clash/" rel="tag">Clash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ERA5/" rel="tag">ERA5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ERA5-Land/" rel="tag">ERA5_Land</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FNL/" rel="tag">FNL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GACOS/" rel="tag">GACOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GAMMA/" rel="tag">GAMMA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDAL/" rel="tag">GDAL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRACE/" rel="tag">GRACE</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GRACE-FO/" rel="tag">GRACE-FO</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Global-Mapper/" rel="tag">Global Mapper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HydroSHEDS/" rel="tag">HydroSHEDS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/InSAR/" rel="tag">InSAR</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK20/" rel="tag">JDK20</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mascons/" rel="tag">Mascons</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matlab/" rel="tag">Matlab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLDAS/" rel="tag">NLDAS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Panoply/" rel="tag">Panoply</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pycharm/" rel="tag">Pycharm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/" rel="tag">R</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SBAS-InSAR/" rel="tag">SBAS-InSAR</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SWOT/" rel="tag">SWOT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sentinel-1/" rel="tag">Sentinel-1</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu16-04/" rel="tag">Ubuntu16.04</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WPS4-5-0/" rel="tag">WPS4.5.0</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WRF/" rel="tag">WRF</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WRF-Hydro-GIS-Pre-Processing-Tools/" rel="tag">WRF Hydro GIS Pre-Processing Tools</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WRF-Hydro/" rel="tag">WRF-Hydro</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WRF-Hydro5-2-0/" rel="tag">WRF-Hydro5.2.0</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WRF4-5-2/" rel="tag">WRF4.5.2</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows10/" rel="tag">Windows10</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/object-Object/" rel="tag">[object Object]</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/documents/" rel="tag">documents</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdal/" rel="tag">gdal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netCDF/" rel="tag">netCDF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rwrfhydro/" rel="tag">rwrfhydro</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tooklkit/" rel="tag">tooklkit</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/toolkit/" rel="tag">toolkit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu16-04/" rel="tag">ubuntu16.04</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websites/" rel="tag">websites</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/" rel="tag">公式推导</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/" rel="tag">卡尔曼滤波</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%9F%E8%80%B3%E5%85%B6%E5%8F%8C%E9%9C%87/" rel="tag">土耳其双震</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E9%9C%87/" rel="tag">地震</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BA%8F%E8%B4%AF%E5%B9%B3%E5%B7%AE/" rel="tag">序贯平差</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%91%84%E5%BD%B1/" rel="tag">摄影</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E4%BA%AB/" rel="tag">数据分享</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E7%8C%AE%E5%88%86%E4%BA%AB/" rel="tag">文献分享</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E7%96%86/" rel="tag">新疆</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%85%E6%B8%B8/" rel="tag">旅游</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%AA%E6%B0%B4/" rel="tag">洪水</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%AA%E6%B0%B4%E9%A2%84%E6%8A%A5/" rel="tag">洪水预报</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB/" rel="tag">生活</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AA%84%E9%97%A8/" rel="tag">窄门</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/" rel="tag">系统安装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%98%E5%9B%BE/" rel="tag">绘图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/" rel="tag">读后感</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/" rel="tag">软件安装</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93/" rel="tag">错误总结</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Anaconda3/" style="font-size: 10px;">Anaconda3</a> <a href="/tags/ArcGIS/" style="font-size: 10px;">ArcGIS</a> <a href="/tags/ArcGIS-Pro/" style="font-size: 10px;">ArcGIS Pro</a> <a href="/tags/Clash/" style="font-size: 10px;">Clash</a> <a href="/tags/ERA5/" style="font-size: 10px;">ERA5</a> <a href="/tags/ERA5-Land/" style="font-size: 10px;">ERA5_Land</a> <a href="/tags/FNL/" style="font-size: 10px;">FNL</a> <a href="/tags/GACOS/" style="font-size: 11.25px;">GACOS</a> <a href="/tags/GAMMA/" style="font-size: 10px;">GAMMA</a> <a href="/tags/GDAL/" style="font-size: 10px;">GDAL</a> <a href="/tags/GRACE/" style="font-size: 15px;">GRACE</a> <a href="/tags/GRACE-FO/" style="font-size: 11.25px;">GRACE-FO</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/Global-Mapper/" style="font-size: 10px;">Global Mapper</a> <a href="/tags/HydroSHEDS/" style="font-size: 10px;">HydroSHEDS</a> <a href="/tags/InSAR/" style="font-size: 17.5px;">InSAR</a> <a href="/tags/JDK20/" style="font-size: 10px;">JDK20</a> <a href="/tags/Mascons/" style="font-size: 10px;">Mascons</a> <a href="/tags/Matlab/" style="font-size: 10px;">Matlab</a> <a href="/tags/NLDAS/" style="font-size: 10px;">NLDAS</a> <a href="/tags/Panoply/" style="font-size: 10px;">Panoply</a> <a href="/tags/Pycharm/" style="font-size: 10px;">Pycharm</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/R/" style="font-size: 11.25px;">R</a> <a href="/tags/SBAS-InSAR/" style="font-size: 11.25px;">SBAS-InSAR</a> <a href="/tags/SWOT/" style="font-size: 10px;">SWOT</a> <a href="/tags/Sentinel-1/" style="font-size: 15px;">Sentinel-1</a> <a href="/tags/Ubuntu16-04/" style="font-size: 18.75px;">Ubuntu16.04</a> <a href="/tags/WPS4-5-0/" style="font-size: 13.75px;">WPS4.5.0</a> <a href="/tags/WRF/" style="font-size: 12.5px;">WRF</a> <a href="/tags/WRF-Hydro-GIS-Pre-Processing-Tools/" style="font-size: 11.25px;">WRF Hydro GIS Pre-Processing Tools</a> <a href="/tags/WRF-Hydro/" style="font-size: 11.25px;">WRF-Hydro</a> <a href="/tags/WRF-Hydro5-2-0/" style="font-size: 20px;">WRF-Hydro5.2.0</a> <a href="/tags/WRF4-5-2/" style="font-size: 15px;">WRF4.5.2</a> <a href="/tags/Windows10/" style="font-size: 10px;">Windows10</a> <a href="/tags/object-Object/" style="font-size: 11.25px;">[object Object]</a> <a href="/tags/documents/" style="font-size: 10px;">documents</a> <a href="/tags/gdal/" style="font-size: 10px;">gdal</a> <a href="/tags/netCDF/" style="font-size: 10px;">netCDF</a> <a href="/tags/rwrfhydro/" style="font-size: 10px;">rwrfhydro</a> <a href="/tags/tooklkit/" style="font-size: 11.25px;">tooklkit</a> <a href="/tags/toolkit/" style="font-size: 15px;">toolkit</a> <a href="/tags/ubuntu16-04/" style="font-size: 12.5px;">ubuntu16.04</a> <a href="/tags/websites/" style="font-size: 16.25px;">websites</a> <a href="/tags/%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/" style="font-size: 10px;">公式推导</a> <a href="/tags/%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/" style="font-size: 10px;">卡尔曼滤波</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 10px;">原创</a> <a href="/tags/%E5%9C%9F%E8%80%B3%E5%85%B6%E5%8F%8C%E9%9C%87/" style="font-size: 10px;">土耳其双震</a> <a href="/tags/%E5%9C%B0%E9%9C%87/" style="font-size: 10px;">地震</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">学习</a> <a href="/tags/%E5%BA%8F%E8%B4%AF%E5%B9%B3%E5%B7%AE/" style="font-size: 10px;">序贯平差</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 10px;">摄影</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E4%BA%AB/" style="font-size: 13.75px;">数据分享</a> <a href="/tags/%E6%96%87%E7%8C%AE%E5%88%86%E4%BA%AB/" style="font-size: 20px;">文献分享</a> <a href="/tags/%E6%96%B0%E7%96%86/" style="font-size: 10px;">新疆</a> <a href="/tags/%E6%97%85%E6%B8%B8/" style="font-size: 10px;">旅游</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 12.5px;">机器学习</a> <a href="/tags/%E6%B4%AA%E6%B0%B4/" style="font-size: 13.75px;">洪水</a> <a href="/tags/%E6%B4%AA%E6%B0%B4%E9%A2%84%E6%8A%A5/" style="font-size: 10px;">洪水预报</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 10px;">生活</a> <a href="/tags/%E7%AA%84%E9%97%A8/" style="font-size: 10px;">窄门</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/" style="font-size: 10px;">系统安装</a> <a href="/tags/%E7%BB%98%E5%9B%BE/" style="font-size: 10px;">绘图</a> <a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 17.5px;">脚本</a> <a href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/" style="font-size: 10px;">读后感</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/" style="font-size: 17.5px;">软件安装</a> <a href="/tags/%E9%94%99%E8%AF%AF%E6%80%BB%E7%BB%93/" style="font-size: 11.25px;">错误总结</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">九月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 SingyuTang All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->

<script src="/js/my.js"></script>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>




<script src="/js/scripts.js"></script>


<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
